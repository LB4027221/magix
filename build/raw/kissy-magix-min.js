KISSY.add("magix/event",function(e,b){var a=b.safeExec;return{trigger:function(b,c,d,h){var n="~~"+b+"_list",l=this[n];if(l){c||(c={});if(!c.type)c.type=b;if(h)for(b=l.length-1;0<=b&&!(!1===a(l[b],c,this));b--);else{b=0;for(h=l.length;b<h&&!(!1===a(l[b],c,this));b++);}}d&&delete this[n]},bind:function(a,b){var d="~~"+a+"_list";this[d]||(this[d]=[]);this[d].push(b)},unbind:function(a,b){var d="~~"+a+"_list",h=this[d];if(h)if(b)for(var d=0,n=h.length;d<n;d++){if(h[d]==b){h.splice(d,1);break}}else delete this[d]}}},
{requires:["magix/magix"]});
KISSY.add("magix/impl/magix",function(e){return{include:function(b){var b=e.Config.packages.magix.path+b+".js?r="+Math.random()+".js",a=new (window.ActiveXObject||window.XMLHttpRequest)("Microsoft.XMLHTTP");a.open("GET",b,!1);a.send(null);return a.responseText},libRequire:function(b,a){e.use(b,function(b,c){a(c)})},libEnv:function(){var b=this.config(),a=b.appHome;if(!a)throw Error("please set appHome");a=a.replace(/(^|\/)app\/?/i,function(a,b){return b||"./"});b.appHome=a;if(!b.release&&/^https?:\/\//.test(a))b.release=
-1==a.indexOf(location.protocol+"//"+location.host);b.release||e.config({map:[[RegExp("("+a+".+)-min\\.js(\\?[^?]+)?"),"$1.js$2"]]});var g="";(g=b.release?b.appTag:e.now())&&(g+=".js");e.config({packages:[{name:"app",path:a,tag:g}]});b.viewChangeAnim&&e.Env.mods["mxext/vfanim"]&&e.use("mxext/vfanim")},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isObject,isRegExp:e.isRegExp,isString:e.isString,isNumber:e.isNumber}});
KISSY.add("magix/impl/router",function(e){return{useHistoryState:function(){var b=this,a=location.href;e.one(window).on("popstate",function(){var e=location.href==a;if(b.$canFirePopState||!e)b.$canFirePopState=!0,b.route()})},useLocationHash:function(){var b=this;e.one(window).on("hashchange",function(){b.suspend();b.route();b.resume()})}}});
KISSY.add("magix/impl/view",function(e,b,a,g){var a=function(){},c={idIt:1,wrapAsyncUpdate:1,registerAsyncUpdateName:1,extend:1};a.extend=function(a,b){var n=function(){n.superclass.constructor.apply(this,arguments);b&&g.safeExec(b,[],this)},l;for(l in this)g.hasProp(c,l)&&(n[l]=this[l]);return e.extend(n,this,a)};g.mix(a.prototype,{getTmplByXHR:function(a,c){b({url:a,dataType:"html",success:function(a){c(a)},error:function(a,b){c(b)}})},delegateUnbubble:function(a,b){var c=this;if(!c.$cacheEvents)c.$cacheEvents=
{};a=e.one(a);a.delegate(b,"*[mx"+b+"]",c.$cacheEvents[b]=function(a){c.processEvent(a)})},undelegateUnbubble:function(a,b){var c=this.$cacheEvents;c&&(a=e.one(a),a.undelegate(b,"*[mx"+b+"]",c[b]),delete c[b])}});return a},{requires:["ajax","sizzle","magix/magix"]});
KISSY.add("magix/magix",function(e,b){var a=function(a,b){return!a?!1:Object.prototype.hasOwnProperty.call(a,b)},g=function(b,c,d){for(var e in c)if(a(c,e)&&(!d||!a(d,e)))b[e]=c[e];return b},c=function(a,b,c,d,o,q){h.isArray(a)||(a=[a]);if(!b||!h.isArray(b)&&!b.callee)b=[b];for(d=0;d<a.length;d++)try{q=a[d],o=h.isFunction(q)&&q.apply(c,b)}catch(u){e.log(u,q)}return o},d=function(){throw Error("unimplement method");},h={isArray:d,isObject:d,isFunction:d,isRegExp:d,isString:d,isNumber:d,libRequire:d,
include:d,libEnv:d,mix:g,unimpl:d,hasProp:a,safeExec:c,noop:function(){},templates:{},cfg:{},locals:{},config:function(a){var b=this.cfg;if(a)this.cfg=g(b,a);return this.cfg},start:function(a){var b=this,a=b.config(a);b.libEnv();a.ready&&(c(a.ready),delete a.ready);b.libRequire("magix/router",function(a){b.libRequire("magix/vom",function(b){a.bind("locationChanged",function(a){a.changed.isViewPath()?b.remountRootVframe(a):b.notifyLocationChange(a)});a.bind("idle",function(){b.resume()});a.bind("busy",
function(){b.suspend()});a.start()})})},objectKeys:function(b){if(Object.keys)return Object.keys(b);var c=[],d;for(d in b)a(b,d)&&c.push(d);return c},local:function(a,b){var c=arguments,d=this.locals;if(0==c.length)return d;if(1==c.length)if(this.isObject(a))g(d,a);else return d[a];else d[a]=b}};return h.mix(h,b)},{requires:["magix/impl/magix"]});
KISSY.add("magix/router",function(e,b,a,g){var c=a.hasProp,d=a.mix,h=function(b){var i,k=this.params;a.isArray(b)||(b=(""+b).split(","));for(var f=0;f<b.length&&!(i=c(k,b[f]));f++);return i},n=function(){return c(this,m)},l=function(){return c(this,"viewPath")},t=function(){return this.hash[m]!=this.query[m]},p=function(a){return this.hash.params[a]!=this.query.params[a]},o=function(a){return c(this.hash.params,a)},q=function(a){return c(this.query.params,a)},u=function(a){return this.params[a]},
y=a.safeExec,r=window,w=encodeURIComponent,z=decodeURIComponent,x=/\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,A=/[^\/]*$/,s=/([#?]).*$/,B=/([^=&?\/#]+)=([^&=#?]*)/g,m="pathname",e=d({iQ:[],iC:0,qH:{},useHistoryState:a.unimpl,useLocationHash:a.unimpl,compareObject:function(b,i){for(var k=[],k=k.concat(a.objectKeys(b)),k=k.concat(a.objectKeys(i)),f=0;f<k.length;f++){var j=k[f];if(b[j]!=i[j])return!1}return!0},getPathnameRelations:function(){if(this.$pnr)return this.$pnr;var b={virtualToReal:{},virtualRegExpToReal:{}},
i=a.config().pathCfg,k=i.map,f=i.defaultView,j=i.defaultPathname||"";if(a.isObject(k))for(var q in k)if(c(k,q))for(var d=q,o=k[q],e=[],e=a.isArray(o)?o:a.isString(o)?o.split(","):[o],o=0;o<e.length;o++)a.isRegExp(e[o])?b.virtualRegExpToReal[d]=e[o]:(!j&&d==f&&(j=e[o]),b.virtualToReal[e[o]]=d);if(!f)throw Error("unset defaultView");b.virtualToReal[""]=f;b.home=f;b[m]=j;b.notFound=i.notFound;return this.$pnr=b},getViewPath:function(a){var i=this.getPathnameRelations();a||(a=i[m]);var k=i.virtualToReal[a];
if(!k)for(var f in i.virtualRegExpToReal)if(i.virtualRegExpToReal[f].test(a)){k=f;break}return{viewPath:k?k:i.notFound||i.home,pathname:k?a:i.notFound?a:i[m]}},start:function(){this.supportHistoryState()?this.useHistoryState():this.useLocationHash();this.route()},supportHistoryState:function(){var b=r.history;return a.config().useHistoryState&&b.pushState&&b.replaceState},pathToObject:function(b){var i={},k={},f=r.location.protocol,j="";s.test(b)?j=b.replace(s,""):~b.indexOf("=")||(j=b);if(j)if(0==
j.indexOf(f))f=j.indexOf("/",f.length+2),j=-1==f?"/":j.substring(f);else if("/"!=j.charAt(0)&&a.config().useHistoryState&&!this.supportHistoryState()){f=r.location[m].replace(A,"");for(f+=j;x.test(f);)f=f.replace(x,"$1/");j=f}b.replace(B,function(i,a,f){k[a]=f});i[m]=j;i.params=k;return i},objectToPath:function(a){var i=a[m],b=[],f;for(f in a.params)c(a.params,f)&&b.push(f+"="+a.params[f]);return i+(b.length?"?":"")+b.join("&")},parseQueryAndHash:function(){var a=r.location.href,i=this.qH;try{a=z(a)}catch(b){}if(c(i,
a))return i[a];var f=a.replace(/^[^?#]+/g,""),j=r.location[m]+f.replace(/^([^#]+).*$/g,"$1"),f=f.replace(/^[^#]*#?/g,""),e=this.pathToObject(j),C=this.pathToObject(f.replace(/^!?/,"")),h={};d(h,e.params);d(h,C.params);return i[a]={isPathnameDiff:t,isParamDiff:p,hashParamsOwn:o,queryParamsOwn:q,get:u,originalQuery:j,originalHash:f,query:e,hash:C,params:h}},parseLocation:function(){var b=this.parseQueryAndHash(),i=this.getViewPath(a.config().useHistoryState?b.hash[m]?b.hash[m]:b.query[m]:b.hash[m]);
return d(b,i)},getChangedLocation:function(b,i){var k={params:{}};b[m]!=i[m]&&(k[m]=!0);if(b.viewPath!=i.viewPath)k.viewPath=!0;for(var f=a.objectKeys(b.params),f=f.concat(a.objectKeys(i.params)),j=0;j<f.length;j++){var c=f[j];b.params[c]!==i.params[c]&&(k.params[c]=!0)}k.isParam=h;k.isPathname=n;k.isViewPath=l;return k},route:function(){var a=this.parseLocation(),i=this.$location||{params:{}},b=!this.$location,f;a.viewPath==(i.viewPath||"")?this.compareLocation(i,a)||(f=!0):f=!0;f&&(i=this.getChangedLocation(i,
a),this.trigger("locationChanged",{location:a,changed:i,firstFire:b}));this.$location=a;this.resume()},compareLocation:function(a,i){return a[m]!=i[m]?!1:this.compareObject(a.params,i.params)},navigate2:function(b){var i=this;b&&a.isString(b)&&i.idle(function(){i.trigger("busy");i.suspend();var k=i.pathToObject(b),f=d({},i.$location.params),f=d(f,k.params);if(k[m]){if(a.config().useHistoryState&&!i.supportHistoryState()&&(f=i.$location.query)&&(f=f.params))for(var j in f)c(f,j)&&!c(k.params,j)&&(k.params[j]=
"")}else k.params=f,k[m]=i.$location[m];i.compareLocation(k,i.$location)?i.resume():(k=i.objectToPath(k),i.supportHistoryState()?(i.$canFirePopState=!0,history.pushState(new Date,document.title,k),i.route()):location.hash="#!"+k)})},navigate:function(b,i){if(a.isObject(b)){var k=[],f;for(f in b)k.push(f+"="+w(b[f]));b=k.join("&");i&&(b=i+"?"+b)}this.navigate2(b)},idle:function(a){this.iC?this.iQ.push(a):y(a)},suspend:function(){this.iC++},resume:function(){0<this.iC&&(this.iC--,this.iC||(this.trigger("idle"),
this.iQ.length&&this.idle(this.iQ.shift())))}},g);return a.mix(e,b)},{requires:["magix/impl/router","magix/magix","magix/event"]});
KISSY.add("magix/vframe",function(e,b,a){var g=document,c=0,d=window.CollectGarbage||b.noop,h=b.safeExec,n=function(a){return"object"==typeof a?a:g.getElementById(a)},l=function(a){this.rC=0;this.rM={};this.notifyParentAlter();var b=this.view;h(b.trigger,"childrenAlter",b);this.unloadSubVframes(a)},t=/<script[^>]*>[\s\S]*?<\/script>/ig,p=function(a){this.id=p.idIt(a);this.viewId=this.id+"_view";this.children=[];this.view=null;this.rC=0;this.rM={}};b.mix(p,{tagName:"vframe",idIt:function(a){return a.id||
(a.id="magix_vf_"+c++)},createVframe:function(a,c){var a=n(a),d=new p(a);b.mix(d,c);return d},createVframeNode:function(a,b){var c=g.createElement(p.tagName);c.id=a;b.parentNode.insertBefore(c,b)}});g.createElement(p.tagName);b.mix(p.prototype,a);b.mix(p.prototype,{viewChangeUseAnim:function(){return!1},oldViewDestroy:b.noop,prepareNextView:b.noop,newViewCreated:b.noop,mountView:function(a){var c=this,d=n(c.id);if(!d._dataBak)d._dataBak=!0,d._dataTmpl=d.innerHTML.replace(t,"");var e=c.viewName&&c.viewChangeUseAnim();
c.unmountView(e,!0);if(a)c.viewName=a,b.libRequire(a,function(b){if(a==c.viewName){b.wrapAsyncUpdate();var h;e?(h=c.viewId,c.prepareNextView()):h=c.id;var g=new b({viewName:a,owner:c,ownerVOM:c.owner,id:h,vId:c.viewId,vfId:c.id});g.bind("interact",function(a){c.trigger("viewLoad",{view:g},c.vced=!0);e&&c.newViewCreated(!0);if(!a.tmpl){if(!e)d.innerHTML=d._dataTmpl;c.loadSubVframes()}g.bind("rendered",function(){c.loadSubVframes()});g.bind("prerender",function(a){l.call(c,a.anim)})});c.view=g;g.load()}})},
unmountView:function(a,b){if(this.view){l.call(this,a);this.view.destroy();this.vced=!1;var c=n(this.id);if(!a&&c._dataBak)c.innerHTML=c._dataTmpl,d();a&&b&&this.oldViewDestroy();delete this.view;delete this.viewName}else this.viewName&&(this.unbind("viewLoad"),delete this.viewName)},loadSubVframes:function(){this.owner.suspend();var a=(n(this.viewId)||n(this.id)).getElementsByTagName(p.tagName),b=a.length;if(b)for(var c=0,d;c<b;c++)d=a[c],d=p.createVframe(d,{owner:this.owner,parentId:this.id}),this.children.push(d.id),
this.owner.registerVframe(d),d.mountView(a[c].getAttribute("data-view"));else this.notifyChildrenCreated();this.owner.resume()},unloadSubVframes:function(a){for(var b=this.children,c,d=0,e=b.length,h;d<e;d++)h=b[d],c=this.owner.getVframe(h),c.unmountView(a),this.owner.unregisterVframe(c),n(h).id="";this.children=[]},postMessageTo:function(a,c){var d=this.owner;b.isArray(a)||(a=[a]);c||(c={});for(var e=0;e<a.length;e++){var g=d.getVframe(a[e]);if(g){var l=g.view;l&&g.vced?h(l.receiveMessage,c,l):g.viewName&&
g.bind("viewLoad",function(a){h(a.view.receiveMessage,c,a.view)})}}},notifyLocationChange:function(a){var c=this.view;if(c&&c.exist&&c.rendered){if(h(c.testOLChanged,a,c))var d=h(c.locationChange,a,c);if(!1!==d){if(!b.isArray(d))d=this.children;for(var c=0,e=d.length,g;c<e;c++)(g=this.owner.getVframe(d[c]))&&h(g.notifyLocationChange,a,g)}}},notifyChildrenCreated:function(){var a=this.view;a&&h(a.trigger,"childrenCreated",a);this.notifyParentAlter(!0)},notifyParentAlter:function(a){var c=this.parentId;
if(c)if(c=this.owner.getVframe(c),a)b.hasProp(c.rM,this.id)||(c.rM[this.id]=1,c.rC++,c.rC==c.children.length&&c.notifyChildrenCreated());else if(b.hasProp(c.rM,this.id))delete c.rM[this.id],c.rC--,a=c.view,h(a.trigger,"childrenAlter",a),c.notifyParentAlter()}});return p},{requires:["magix/magix","magix/event"]});
KISSY.add("magix/view",function(e,b,a,g){var c=1,d=a.safeExec,h=a.hasProp,n="render,renderUI,updateUI".split(","),l=function(i){a.mix(this,i);this.exist=!0;this.iQ=[];this.sign=this.iC=0},t=l.prototype,p=function(a,b){return function(){var f=this,c=arguments;f.idle(function(){b&&f.sign++;a.apply(f,c)},[],f,a)}},o=/(?:^|\s)return(?:(?:\s+[+\-\w$'"{\[\(\/])|[+\-{\[\(\/'"])/,q=/{([\s\S]+)}/,u=/\\[\s\S]/g,y=/\s*\/\s*/g,r=/^[\s\xa0\u3000\uFEFF]*$/,w=[/[^\w$_]\/[\s\S]*?\//,/(?:'[^']*')|(?:"[^"]*")/,/{[^{}]+}/],
z=function(a){if(a=(""+a).match(q)){a=a[1];if(r.test(a))return!0;for(var a=a.replace(u,"").replace(y,""),b=0,f;b<w.length;b++)for(f=w[b];f.test(a);)a=a.replace(f,"");return o.test(a)}return!1};a.mix(l,{idIt:function(a){return a.id||(a.id="magix_mxe_"+c++)},wrapAsyncUpdate:function(){if(!this["~~"]){this["~~"]=1;var b=this.prototype,c;this.registerAsyncUpdateName();for(var f in b){c=b[f];var d=null;a.isFunction(c)&&c!=a.noop&&!c["~~"]&&!z(c)&&(h(this.$ans,f)?d=p(c,!0):h(b,f)&&!h(t,f)&&(d=p(c)),d&&
(d["~~"]=c,b[f]=d))}}},registerAsyncUpdateName:function(b){if(!this.$ans){this.$ans={};for(var c=0;c<n.length;c++)this.$ans[n[c]]=!0}if(b){a.isArray(b)||(b=[b]);for(c=0;c<b.length;c++)this.$ans[b[c]]=!0}return this}});var x={submit:1,blur:1,focus:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,valuechange:1},e=l.prototype,A=document,s=window,B=s.CollectGarbage||a.noop,m="abort,stop,cancel,destroy,dispose".split(","),v=function(a){return"object"==typeof a?a:A.getElementById(a)};a.mix(e,
g);a.mix(e,{getTmplByXHR:a.unimpl,delegateUnbubble:a.unimpl,undelegateUnbubble:a.unimpl,render:a.noop,locationChange:a.noop,receiveMessage:a.noop,init:a.noop,hasTemplate:!0,enableEvent:!0,enableRefreshAnim:!1,load:function(){var a=this,b=a.hasTemplate,c=function(){a.suspend();d(a.render,[],a);a.delegateBubbleEvents();a.idle(function(){var c=!b&&!a.rendered;if(c)a.delegateUnbubbleEvents(),a.rendered=!0;d(a.init,[],a);c&&a.trigger("created",null,!0)});a.trigger("interact",{tmpl:b},!0);a.resume()};b?
a.getTemplate(a.manage(function(b){a.template=b;c()})):c()},updateViewId:function(){this.id=v(this.vId)?this.vId:this.vfId},setNodeHTML:function(a){v(this.id).innerHTML=a},setViewHTML:function(b){if(this.exist){var c=this.rendered;if(c){var f=a.config().viewChangeAnim&&this.enableRefreshAnim;this.trigger("refresh",null,!0,!0);this.trigger("prerender",{anim:f});this.destroyManaged(!0);this.undelegateUnBubbleEvents();var j=this.owner;f&&(d(j.oldViewDestroy,[],j),d(j.prepareNextView,[],j),this.updateViewId())}this.setNodeHTML(b);
B();f&&d(j.newViewCreated,[],j);this.delegateUnbubbleEvents();this.rendered=!0;this.trigger("rendered");c||this.trigger("created",null,!0)}},postMessageTo:function(a,b){this.idle(this.owner.postMessageTo,[a,b],this.owner)},idle:function(a,b,f,j){var e=this;j||(j=a);var h=j["~~_id_"],g=e.iQ;e.iC?(h?g[h]&&(g[h]["~~_id_"]="~~_id_"):h=j["~~_id_"]="~~"+c++,g.push([a,b,f,j]),g[h]=a):"~~_id_"!=a["~~_id_"]&&e.ownerVOM.idle(function(){e.exist&&(h&&delete g[h],d(a,b,f))})},getLocation:function(){return this.ownerVOM.$location},
observeLocation:function(b,c){var f=arguments.length;if(f)1==f&&(c=!1),this.$location={keys:a.isArray(b)?b:(""+b).split(","),pn:c}},testOLChanged:function(a){var b=this.$location,a=a.changed;if(b){var c=!1;b.pn&&(c=a.isPathname());c||(c=a.isParam(b.keys));return c}return!0},destroy:function(){this.trigger("refresh",null,!0,!0);this.trigger("destroy",null,!0,!0);this.destroyManaged();this.undelegateUnBubbleEvents();this.undelegateBubbleEvents();this.exist=!1;this.iQ=[];this.sign++},getTemplate:function(b){var c=
this;if(c.template)b(c.template);else{var f=a.templates[c.viewName];if(f)b(f);else{var f=a.config(),d=f.appHome+c.viewName+".html";f.release||(d+="?_="+(new Date).getTime()+".html");c.getTmplByXHR(d,function(f){b(a.templates[c.viewName]=f)})}}},processEvent:function(a){if(this.enableEvent&&this.exist){for(var b=a.target;b&&1!=b.nodeType;)b=b.parentNode;for(var c=b,j="mx"+a.type,e,h=v(this.vfId);c&&c!=h&&!(e=c.getAttribute(j));)c=c.parentNode;if(e)if(j=c.getAttribute("data-handler"))~[",",j,","].join().indexOf(","+
this.vfId+",")||(e=0);else{for(j=c;j&&j!=h;)if("VFRAME"==j.tagName.toUpperCase()){c.setAttribute("data-handler",j.id);e=0;break}else j=j.parentNode;e&&c.setAttribute("data-handler",this.vfId)}if(e){e=e.split(":");var h=e.shift(),j=e[e.length-1],g,c=l.idIt(c);if("_halt_"==j||"_stop_"==j)a.stopPropagation(),g=!0;if("_halt_"==j||"_prevent_"==j)a.preventDefault(),g=!0;g&&e.pop();g=this.events;for(var j=g[a.type],m=0,n;m<e.length;m++)n=e[m].lastIndexOf("@"),-1<n&&(e[e[m].substring(n+1)]=e[m].substring(0,
n));j[h]&&d(j[h],{view:this,currentId:c,targetId:l.idIt(b),domEvent:a,events:g,params:e},j)}}},fixedEvent:function(a){if(!a)a=s.event;if(a){if(!a.stopPropagation)a.stopPropagation=function(){a.cancelBubble=!0};if(!a.preventDefault)a.preventDefault=function(){a.returnValue=!1};if(a.srcElement&&!a.target)a.target=a.srcElement}return a},processDelegateEvents:function(a,b){var c=this;if(c.enableEvent){var d=c.events,e=v(c.vfId);if(c.$bubbleList&&c.$unbubbleList)for(var d=a?c.$bubbleList:c.$unbubbleList,
g=0;g<d.length;g++)a?e["on"+d[g]]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)}:b?c.undelegateUnbubble(e,d[g]):c.delegateUnbubble(e,d[g]);else for(g in c.$bubbleList=[],c.$unbubbleList=[],d)h(d,g)&&(h(x,g)?(c.$unbubbleList.push(g),a||(b?c.undelegateUnbubble(e,g):c.delegateUnbubble(e,g))):(c.$bubbleList.push(g),a&&(e["on"+g]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)})))}},delegateBubbleEvents:function(){this.processDelegateEvents(!0)},delegateUnbubbleEvents:function(){this.processDelegateEvents()},
undelegateUnBubbleEvents:function(){this.processDelegateEvents(!1,!0)},undelegateBubbleEvents:function(){this.processDelegateEvents(!0,!0)},manage:function(b,d){var f=!0;1==arguments.length&&(d=b,b="res_"+c++,f=!1);if(!this.$resCache)this.$resCache={};f={hasKey:f,res:d};a.isFunction(d)&&(d=this.wrapManagedFunction(d),f[this.sign]=d);this.$resCache[b]=f;return d},getManaged:function(b){var c=this.$resCache,d=this.sign;return c&&h(c,b)?(b=c[b],c=b.res,a.isFunction(c)&&(b[d]||(b[d]=this.wrapManagedFunction(c)),
c=b[d]),c):null},removeManaged:function(a){var b=null,c=this.$resCache;if(c)if(h(c,a))b=c[a].res,delete c[a];else for(var d in c)if(c[d].res===a){b=c[d].res;delete c[d];break}return b},destroyManaged:function(b){var c=this.$resCache;if(c){for(var f in c){var e=c[f],g=!1,h=e.res;if(a.isNumber(h))s.clearTimeout(h),s.clearInterval(h),g=!0;else if(h)for(var l=0;l<m.length;l++)a.isFunction(h[m[l]])&&(d(h[m[l]],[],h),g=!0);this.trigger("destroyResource",{resource:h,processed:g});b&&!e.hasKey&&delete c[f]}b||
(this.unbind("destroyResource"),delete this.$resCache)}},wrapManagedFunction:function(a){var b=this,c=b.sign;return function(){b.sign==c&&d(a,arguments,b)}},beginAsyncUpdate:function(){return this.sign++},signature:function(){return this.sign},endAsyncUpdate:function(){return this.sign},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}});a.mix(l,b,{prototype:!0});a.mix(l.prototype,
b.prototype);return l},{requires:["magix/impl/view","magix/magix","magix/event"]});
KISSY.add("magix/vom",function(e,b,a){var g=document;return{iC:0,iQ:[],rootVframe:null,vframes:{},rootVframeId:"magix_vf_root",registerVframe:function(a){this.vframes[a.id]=a},getVframe:function(a){return this.vframes[a]},unregisterVframe:function(b){delete this.vframes[a.isString(b)?b:b.id]},buildRootVframe:function(){if(!this.rootVframe)g.getElementById(this.rootVframeId)||b.createVframeNode(this.rootVframeId,g.body.firstChild),this.rootVframe=b.createVframe(this.rootVframeId,{owner:this}),this.registerVframe(this.rootVframe)},
remountRootVframe:function(a){this.$location=a.location;this.buildRootVframe();this.rootVframe.mountView(a.location.viewPath)},notifyLocationChange:function(a){this.$location=a.location;this.rootVframe&&this.rootVframe.notifyLocationChange(a)},idle:function(b,d,e){this.iC?this.iQ.push([b,d,e]):a.safeExec(b,d,e)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=this.iQ;if(a.length){a=[].slice.call(a);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}}}},
{requires:["magix/vframe","magix/magix"]});(function(e){var b=function(){};if(!e.console)e.console={log:b,warn:b,error:b,debug:b};if(!e.Magix)e.Magix={start:function(a){this.$tempCfg=a}},KISSY.use("magix/magix",function(a,b){var c=e.Magix.$tempCfg;e.Magix=b;c&&b.start(c)})})(this);