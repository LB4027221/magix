KISSY.add("magix/event",function(e,b){var c=b.safeExec;return{trigger:function(b,d,a,h){var l="~~"+b+"_list",o=this[l];if(o){d||(d={});if(!d.type)d.type=b;if(h)for(b=o.length-1;0<=b&&!(!1===c(o[b],d,this));b--);else{b=0;for(h=o.length;b<h&&!(!1===c(o[b],d,this));b++);}}a&&delete this[l]},bind:function(c,b){var a="~~"+c+"_list";this[a]||(this[a]=[]);this[a].push(b)},unbind:function(c,b){var a="~~"+c+"_list",h=this[a];if(h)if(b)for(var a=0,l=h.length;a<l;a++){if(h[a]==b){h.splice(a,1);break}}else delete this[a]}}},
{requires:["magix/magix"]});
KISSY.add("magix/impl/magix",function(e){return{include:function(b){var b=e.Config.packages.magix.path+b+".js?r="+Math.random()+".js",c=new (window.ActiveXObject||window.XMLHttpRequest)("Microsoft.XMLHTTP");c.open("GET",b,!1);c.send(null);return c.responseText},libRequire:function(b,c){e.use(b,function(b,d){c(d)})},libEnv:function(){var b=this.config(),c=b.appHome;if(!c)throw Error("please set appHome");c=c.replace(/(^|\/)app\/?/i,function(c,a){return a||"./"});b.appHome=c;if(!b.release&&/^https?:\/\//.test(c))b.release=
-1==c.indexOf(location.protocol+"//"+location.host);b.release||e.config({map:[[RegExp("("+c+".+)-min\\.js(\\?[^?]+)?"),"$1.js$2"]]});var m="";(m=b.release?b.appTag:e.now())&&(m+=".js");e.config({packages:[{name:"app",path:c,tag:m}]});b.viewChangeAnim&&e.Env.mods["mxext/vfanim"]&&e.use("mxext/vfanim")},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isObject,isRegExp:e.isRegExp,isString:e.isString,isNumber:e.isNumber}});
KISSY.add("magix/impl/router",function(e){return{useHistoryState:function(){var b=this,c=location.href;e.one(window).on("popstate",function(){var e=location.href==c;if(b.$canFirePopState||!e)b.$canFirePopState=!0,b.route()})},useLocationHash:function(){var b=this;e.one(window).on("hashchange",function(){b.suspend();b.route();b.resume()})}}});
KISSY.add("magix/impl/view",function(e,b,c,m){var d=function(){},a={idIt:1,wrapAsyncUpdate:1,registerAsyncUpdateName:1,extend:1,prepare:1};d.extend=function(c,a){var b=function(){b.superclass.constructor.apply(this,arguments);a&&m.safeExec(a,[],this)};b.extend=d.extend;return e.extend(b,this,c)};d.prepare=function(c){if(!c.prepare)for(var b in this)m.hasProp(a,b)&&(c[b]=this[b])};m.mix(d.prototype,{getTmplByXHR:function(c,a){b({url:c,dataType:"html",success:function(c){a(c)},error:function(c,b){a(b)}})},
delegateUnbubble:function(c,a){var b=this;if(!b.$cacheEvents)b.$cacheEvents={};c=e.one(c);c.delegate(a,"*[mx"+a+"]",b.$cacheEvents[a]=function(c){b.processEvent(c)})},undelegateUnbubble:function(c,a){var b=this.$cacheEvents;b&&(c=e.one(c),c.undelegate(a,"*[mx"+a+"]",b[a]),delete b[a])}});return d},{requires:["ajax","sizzle","magix/magix"]});
KISSY.add("magix/magix",function(e,b){var c=function(c,a){return!c?!1:Object.prototype.hasOwnProperty.call(c,a)},m=function(a,b,d){for(var e in b)if(c(b,e)&&(!d||!c(d,e)))a[e]=b[e];return a},d=function(c,a,b,d,m,r){h.isArray(c)||(c=[c]);if(!a||!h.isArray(a)&&!a.callee)a=[a];for(d=0;d<c.length;d++)try{r=c[d],m=h.isFunction(r)&&r.apply(b,a)}catch(k){e.log(k,r)}return m},a=function(){throw Error("unimplement method");},h={isArray:a,isObject:a,isFunction:a,isRegExp:a,isString:a,isNumber:a,libRequire:a,
include:a,libEnv:a,mix:m,unimpl:a,hasProp:c,safeExec:d,noop:function(){},templates:{},cfg:{},locals:{},config:function(c){var a=this.cfg;if(c)this.cfg=m(a,c);return this.cfg},start:function(c){var a=this,c=a.config(c);a.libEnv();c.ready&&(d(c.ready),delete c.ready);a.libRequire("magix/router",function(c){a.libRequire("magix/vom",function(a){c.bind("locationChanged",function(c){c.changed.isViewPath()?a.remountRootVframe(c):a.notifyLocationChange(c)});c.bind("idle",function(){a.resume()});c.bind("busy",
function(){a.suspend()});c.start()})})},objectKeys:function(a){if(Object.keys)return Object.keys(a);var b=[],d;for(d in a)c(a,d)&&b.push(d);return b},local:function(c,a){var b=arguments,d=this.locals;if(0==b.length)return d;if(1==b.length)if(this.isObject(c))m(d,c);else return d[c];else d[c]=a}};return h.mix(h,b)},{requires:["magix/impl/magix"]});
KISSY.add("magix/router",function(e,b,c,m){var d=c.hasProp,a=c.mix,h=function(a){var b,j=this.params;c.isArray(a)||(a=(""+a).split(","));for(var g=0;g<a.length&&!(b=d(j,a[g]));g++);return b},l=function(){return d(this,n)},o=function(){return d(this,"viewPath")},q=function(){return this.hash[n]!=this.query[n]},u=function(c){return this.hash.params[c]!=this.query.params[c]},p=function(c){return d(this.hash.params,c)},r=function(c){return d(this.query.params,c)},k=function(c){return this.params[c]},
A=c.safeExec,s=window,B=encodeURIComponent,w=decodeURIComponent,x=/\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,C=/[^\/]*$/,y=/([#?]).*$/,t=/([^=&?\/#]+)=([^&=#?]*)/g,n="pathname",e=a({iQ:[],iC:0,qH:{},useHistoryState:c.unimpl,useLocationHash:c.unimpl,compareObject:function(a,b){for(var j=[],j=j.concat(c.objectKeys(a)),j=j.concat(c.objectKeys(b)),g=0;g<j.length;g++){var f=j[g];if(a[f]!=b[f])return!1}return!0},getPathnameRelations:function(){if(this.$pnr)return this.$pnr;var a={virtualToReal:{},virtualRegExpToReal:{}},
b=c.config().pathCfg,j=b.map,g=b.defaultView,f=b.defaultPathname||"";if(c.isObject(j))for(var k in j)if(d(j,k))for(var r=k,i=j[k],e=[],e=c.isArray(i)?i:c.isString(i)?i.split(","):[i],i=0;i<e.length;i++)c.isRegExp(e[i])?a.virtualRegExpToReal[r]=e[i]:(!f&&r==g&&(f=e[i]),a.virtualToReal[e[i]]=r);if(!g)throw Error("unset defaultView");a.virtualToReal[""]=g;a.home=g;a[n]=f;a.notFound=b.notFound;return this.$pnr=a},getViewPath:function(c){var a=this.getPathnameRelations();c||(c=a[n]);var j=a.virtualToReal[c];
if(!j)for(var g in a.virtualRegExpToReal)if(a.virtualRegExpToReal[g].test(c)){j=g;break}return{viewPath:j?j:a.notFound||a.home,pathname:j?c:a.notFound?c:a[n]}},start:function(){this.supportHistoryState()?this.useHistoryState():this.useLocationHash();this.route()},supportHistoryState:function(){var a=s.history;return c.config().useHistoryState&&a.pushState&&a.replaceState},pathToObject:function(a){var b={},j={},g=s.location.protocol,f="";y.test(a)?f=a.replace(y,""):~a.indexOf("=")||(f=a);if(f)if(0==
f.indexOf(g))g=f.indexOf("/",g.length+2),f=-1==g?"/":f.substring(g);else if("/"!=f.charAt(0)&&c.config().useHistoryState&&!this.supportHistoryState()){g=s.location[n].replace(C,"");for(g+=f;x.test(g);)g=g.replace(x,"$1/");f=g}a.replace(t,function(g,a,c){j[a]=c});b[n]=f;b.params=j;return b},objectToPath:function(a){var c=a[n],j=[],g;for(g in a.params)d(a.params,g)&&j.push(g+"="+a.params[g]);return c+(j.length?"?":"")+j.join("&")},parseQueryAndHash:function(){var b=s.location.href,e=this.qH;if(!c.config().originalHREF)try{b=
w(b)}catch(j){}if(d(e,b))return e[b];var g=b.replace(/^[^?#]+/g,""),f=s.location[n]+g.replace(/^([^#]+).*$/g,"$1"),g=g.replace(/^[^#]*#?/g,""),D=this.pathToObject(f),E=this.pathToObject(g.replace(/^!?/,"")),i={};a(i,D.params);a(i,E.params);return e[b]={isPathnameDiff:q,isParamDiff:u,hashParamsOwn:p,queryParamsOwn:r,get:k,originalQuery:f,originalHash:g,query:D,hash:E,params:i}},parseLocation:function(){var b=this.parseQueryAndHash(),k=this.getViewPath(c.config().useHistoryState?b.hash[n]?b.hash[n]:
b.query[n]:b.hash[n]);return a(b,k)},getChangedLocation:function(a,b){var j={params:{}};a[n]!=b[n]&&(j[n]=!0);if(a.viewPath!=b.viewPath)j.viewPath=!0;for(var g=c.objectKeys(a.params),g=g.concat(c.objectKeys(b.params)),f=0;f<g.length;f++){var k=g[f];a.params[k]!==b.params[k]&&(j.params[k]=!0)}j.isParam=h;j.isPathname=l;j.isViewPath=o;return j},route:function(){var a=this.parseLocation(),c=this.$location||{params:{}},j=!this.$location,g;a.viewPath==(c.viewPath||"")?this.compareLocation(c,a)||(g=!0):
g=!0;g&&(c=this.getChangedLocation(c,a),this.trigger("locationChanged",{location:a,changed:c,firstFire:j}));this.$location=a;this.resume()},compareLocation:function(a,c){return a[n]!=c[n]?!1:this.compareObject(a.params,c.params)},navigate2:function(b){var k=this;b&&c.isString(b)&&k.idle(function(){k.trigger("busy");k.suspend();var j=k.pathToObject(b),g=a({},k.$location.params),g=a(g,j.params);if(j[n]){if(c.config().useHistoryState&&!k.supportHistoryState()&&(g=k.$location.query)&&(g=g.params))for(var f in g)d(g,
f)&&!d(j.params,f)&&(j.params[f]="")}else j.params=g,j[n]=k.$location[n];k.compareLocation(j,k.$location)?k.resume():(j=k.objectToPath(j),k.supportHistoryState()?(k.$canFirePopState=!0,history.pushState(new Date,document.title,j),k.route()):location.hash="#!"+j)})},navigate:function(a,b){if(c.isObject(a)){var j=[],g=c.config().originalHREF,f;for(f in a)j.push(f+"="+(g?a[f]:B(a[f])));a=j.join("&");b&&(a=b+"?"+a)}this.navigate2(a)},idle:function(a){this.iC?this.iQ.push(a):A(a)},suspend:function(){this.iC++},
resume:function(){0<this.iC&&(this.iC--,this.iC||(this.trigger("idle"),this.iQ.length&&this.idle(this.iQ.shift())))}},m);return c.mix(e,b)},{requires:["magix/impl/router","magix/magix","magix/event"]});
KISSY.add("magix/vframe",function(e,b,c,m){var d=document,a=0,h=window.CollectGarbage||b.noop,l=b.safeExec,o=function(a){return"object"==typeof a?a:d.getElementById(a)},q=function(a){this.rC=0;this.rM={};this.notifyParentAlter();var c=this.view;l(c.trigger,"childrenAlter",c);this.unloadSubVframes(a)},u=/<script[^>]*>[\s\S]*?<\/script>/ig,p=function(a){this.id=p.idIt(a);this.viewId=this.id+"_view";this.children=[];this.view=null;this.rC=0;this.rM={}};b.mix(p,{tagName:"vframe",idIt:function(c){return c.id||
(c.id="magix_vf_"+a++)},createVframe:function(a,c){var a=o(a),d=new p(a);b.mix(d,c);return d},createVframeNode:function(a,c){var b=d.createElement(p.tagName);b.id=a;c.parentNode.insertBefore(b,c)}});d.createElement(p.tagName);b.mix(p.prototype,c);b.mix(p.prototype,{viewChangeUseAnim:function(){return!1},oldViewDestroy:b.noop,prepareNextView:b.noop,newViewCreated:b.noop,mountView:function(a){var c=this,d=o(c.id);d._dataBak?d._dataChged=1:(d._dataBak=1,d._dataTmpl=d.innerHTML.replace(u,""));var e=c.viewName&&
c.viewChangeUseAnim();c.unmountView(e,!0);if(a)c.viewName=a,b.libRequire(a,function(b){if(a==c.viewName){m.prepare(b);b.wrapAsyncUpdate();var h;e?(h=c.viewId,c.prepareNextView()):h=c.id;var l=new b({viewName:a,owner:c,ownerVOM:c.owner,id:h,vId:c.viewId,vfId:c.id});l.bind("interact",function(a){c.trigger("viewLoad",{view:l},c.vced=!0);e&&c.newViewCreated(!0);if(!a.tmpl){if(!e&&d._dataChged)d.innerHTML=d._dataTmpl;c.loadSubVframes()}l.bind("rendered",function(){c.loadSubVframes()});l.bind("prerender",
function(a){q.call(c,a.anim)})});c.view=l;l.load(p)}})},unmountView:function(a,c){if(this.view){q.call(this,a);this.view.destroy();this.vced=!1;var b=o(this.id);if(!a&&b._dataBak)b.innerHTML=b._dataTmpl,h();a&&c&&this.oldViewDestroy();delete this.view;delete this.viewName}else this.viewName&&(this.unbind("viewLoad"),delete this.viewName)},loadSubVframes:function(){var a=this.owner;a.suspend();var c=(o(this.viewId)||o(this.id)).getElementsByTagName(p.tagName),b=c.length;if(b)for(var d=0,e;d<b;d++)e=
c[d],e=p.createVframe(e,{owner:this.owner,parentId:this.id}),this.children.push(e.id),e.mountView(c[d].getAttribute("data-view")),a.registerVframe(e);else this.notifyChildrenCreated();a.resume()},unloadSubVframes:function(a){for(var c=this.children,b,d=0,e=c.length,h;d<e;d++)h=c[d],b=this.owner.getVframe(h),b.unmountView(a),this.owner.unregisterVframe(b),o(h).id="";this.children=[]},notifyLocationChange:function(a){var c=this.view;if(c&&c.exist&&c.rendered){if(l(c.testOLChanged,a,c))var d=l(c.locationChange,
a,c);if(!1!==d){if(!b.isArray(d))d=this.children;for(var c=0,e=d.length,h;c<e;c++)(h=this.owner.getVframe(d[c]))&&l(h.notifyLocationChange,a,h)}}},notifyChildrenCreated:function(){var a=this.view;a&&l(a.trigger,"childrenCreated",a);this.notifyParentAlter(!0)},notifyParentAlter:function(a){var c=this.parentId;if(c)if(c=this.owner.getVframe(c),a)b.hasProp(c.rM,this.id)||(c.rM[this.id]=1,c.rC++,c.rC==c.children.length&&c.notifyChildrenCreated());else if(b.hasProp(c.rM,this.id))delete c.rM[this.id],c.rC--,
a=c.view,l(a.trigger,"childrenAlter",a),c.notifyParentAlter()},message:function(c){var a=this.view;a&&this.vced?l(a.receiveMessage,c,a):this.bind("viewLoad",function(a){l(a.view.receiveMessage,c,a.view)})}});return p},{requires:["magix/magix","magix/event","magix/view"]});
KISSY.add("magix/view",function(e,b,c,m){var d=1,a=c.safeExec,h=c.hasProp,l,o="render,renderUI,updateUI".split(","),q=function(a){c.mix(this,a);this.exist=!0;this.iQ=[];this.sign=this.iC=0},u=q.prototype,p=function(a,c){return function(){var b=this,d=arguments;b.idle(function(){c&&b.sign++;a.apply(b,d)},[],b,a)}},r=/(?:^|\s)return(?:(?:\s+[+\-\w$'"{\[\(\/])|[+\-{\[\(\/'"])/,k=/{([\s\S]+)}/,A=/\\[\s\S]/g,s=/\s*\/\s*/g,B=/^[\s\xa0\u3000\uFEFF]*$/,w=[/[^\w$_]\/[\s\S]*?\//,/(?:'[^']*')|(?:"[^"]*")/,/{[^{}]+}/],
x=function(a){if(a=(""+a).match(k)){a=a[1];if(B.test(a))return!0;for(var a=a.replace(A,"").replace(s,""),c=0,b;c<w.length;c++)for(b=w[c];b.test(a);)a=a.replace(b,"");return r.test(a)}return!1};c.mix(q,{idIt:function(a){return a.id||(a.id="magix_mxe_"+d++)},wrapAsyncUpdate:function(){if(!this["~~"]){this["~~"]=1;var a=this.prototype,b;this.registerAsyncUpdateName();for(var f in a){b=a[f];var d=null;c.isFunction(b)&&b!=c.noop&&!b["~~"]&&!x(b)&&(h(this.$ans,f)?d=p(b,!0):h(a,f)&&!h(u,f)&&(d=p(b)),d&&
(d["~~"]=b,a[f]=d))}}},registerAsyncUpdateName:function(a){if(!this.$ans){this.$ans={};for(var b=0;b<o.length;b++)this.$ans[o[b]]=!0}if(a){c.isArray(a)||(a=[a]);for(b=0;b<a.length;b++)this.$ans[a[b]]=!0}return this}});var C={submit:1,blur:1,focus:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,valuechange:1},e=q.prototype,y=document,t=window,n=t.CollectGarbage||c.noop,z="abort,stop,cancel,destroy,dispose".split(","),v=function(a){return"object"==typeof a?a:y.getElementById(a)};c.mix(e,
m);c.mix(e,{getTmplByXHR:c.unimpl,delegateUnbubble:c.unimpl,undelegateUnbubble:c.unimpl,render:c.noop,locationChange:c.noop,receiveMessage:c.noop,init:c.noop,hasTemplate:!0,enableEvent:!0,enableRefreshAnim:!1,load:function(c){l||(l=c.tagName.toUpperCase());var b=this,f=b.hasTemplate,d=function(){b.suspend();a(b.init,[],b);a(b.render,[],b);b.delegateBubbleEvents();b.idle(function(){var a=!f&&!b.rendered;if(a)b.delegateUnbubbleEvents(),b.rendered=!0;a&&b.trigger("created",null,!0)});b.trigger("interact",
{tmpl:f},!0);b.resume()};f?b.getTemplate(b.manage(function(a){b.template=a;d()})):d()},updateViewId:function(){this.id=v(this.vId)?this.vId:this.vfId},setNodeHTML:function(a){v(this.id).innerHTML=a},setViewHTML:function(b){if(this.exist){var g=this.rendered;if(g){var f=c.config().viewChangeAnim&&this.enableRefreshAnim;this.trigger("refresh",null,!0,!0);this.trigger("prerender",{anim:f});this.destroyManaged(!0);this.undelegateUnBubbleEvents();var d=this.owner;f&&(a(d.oldViewDestroy,[],d),a(d.prepareNextView,
[],d),this.updateViewId())}this.setNodeHTML(b);n();f&&a(d.newViewCreated,[],d);this.delegateUnbubbleEvents();this.rendered=!0;this.trigger("rendered");g||this.trigger("created",null,!0)}},postMessageTo:function(a,c){var b=this.ownerVOM;this.idle(b.postMessage,[a,c],b)},idle:function(c,b,f,e){var h=this;e||(e=c);var i=e["~~_id_"],l=h.iQ;h.iC?(i?l[i]&&(l[i]["~~_id_"]="~~_id_"):i=e["~~_id_"]="~~"+d++,l.push([c,b,f,e]),l[i]=c):"~~_id_"!=c["~~_id_"]&&h.ownerVOM.idle(function(){h.exist&&(i&&delete l[i],
a(c,b,f))})},getLocation:function(){return this.ownerVOM.$location},observeLocation:function(a,b){var f=arguments.length;if(f)1==f&&(b=!1),this.$location={keys:c.isArray(a)?a:(""+a).split(","),pn:b}},testOLChanged:function(a){var c=this.$location,a=a.changed;if(c){var b=!1;c.pn&&(b=a.isPathname());b||(b=a.isParam(c.keys));return b}return!0},destroy:function(){this.trigger("refresh",null,!0,!0);this.trigger("destroy",null,!0,!0);this.destroyManaged();this.undelegateUnBubbleEvents();this.undelegateBubbleEvents();
this.exist=!1;this.iQ=[];this.sign++},getTemplate:function(a){var b=this;if(b.template)a(b.template);else{var f=c.templates[b.viewName];if(f)a(f);else{var f=c.config(),d=f.appHome+b.viewName+".html";f.release||(d+="?_="+(new Date).getTime()+".html");b.getTmplByXHR(d,function(f){a(c.templates[b.viewName]=f)})}}},processEvent:function(c){if(this.enableEvent&&this.exist){for(var b=c.target;b&&1!=b.nodeType;)b=b.parentNode;for(var f=b,d="mx"+c.type,e,i=v(this.vfId);f&&f!=i&&!(e=f.getAttribute(d));)f=
f.parentNode;if(e)if(d=f.getAttribute("data-handler"))~[",",d,","].join().indexOf(","+this.vfId+",")||(e=0);else{for(d=f;d&&d!=i;)if(d.tagName.toUpperCase()==l){f.setAttribute("data-handler",d.id);e=0;break}else d=d.parentNode;e&&f.setAttribute("data-handler",this.vfId)}if(e){e=e.split(":");var i=e.shift(),d=e[e.length-1],h,f=q.idIt(f);if("_halt_"==d||"_stop_"==d)c.stopPropagation(),h=!0;if("_halt_"==d||"_prevent_"==d)c.preventDefault(),h=!0;h&&e.pop();h=this.events;for(var d=h[c.type],k=0,m;k<e.length;k++)m=
e[k].lastIndexOf("@"),-1<m&&(e[e[k].substring(m+1)]=e[k].substring(0,m));d[i]&&a(d[i],{view:this,currentId:f,targetId:q.idIt(b),domEvent:c,events:h,params:e},d)}}},fixedEvent:function(a){if(!a)a=t.event;if(a){if(!a.stopPropagation)a.stopPropagation=function(){a.cancelBubble=!0};if(!a.preventDefault)a.preventDefault=function(){a.returnValue=!1};if(a.srcElement&&!a.target)a.target=a.srcElement}return a},processDelegateEvents:function(a,c){var b=this;if(b.enableEvent){var d=b.events,e=v(b.vfId);if(b.$bubbleList&&
b.$unbubbleList)for(var d=a?b.$bubbleList:b.$unbubbleList,i=0;i<d.length;i++)a?e["on"+d[i]]=c?null:function(a){a=b.fixedEvent(a);b.processEvent(a)}:c?b.undelegateUnbubble(e,d[i]):b.delegateUnbubble(e,d[i]);else for(i in b.$bubbleList=[],b.$unbubbleList=[],d)h(d,i)&&(h(C,i)?(b.$unbubbleList.push(i),a||(c?b.undelegateUnbubble(e,i):b.delegateUnbubble(e,i))):(b.$bubbleList.push(i),a&&(e["on"+i]=c?null:function(a){a=b.fixedEvent(a);b.processEvent(a)})))}},delegateBubbleEvents:function(){this.processDelegateEvents(!0)},
delegateUnbubbleEvents:function(){this.processDelegateEvents()},undelegateUnBubbleEvents:function(){this.processDelegateEvents(!1,!0)},undelegateBubbleEvents:function(){this.processDelegateEvents(!0,!0)},manage:function(a,b){var e=!0;1==arguments.length&&(b=a,a="res_"+d++,e=!1);if(!this.$resCache)this.$resCache={};e={hasKey:e,res:b};c.isFunction(b)&&(b=this.wrapManagedFunction(b),e[this.sign]=b);this.$resCache[a]=e;return b},getManaged:function(a){var b=this.$resCache,d=this.sign;return b&&h(b,a)?
(a=b[a],b=a.res,c.isFunction(b)&&(a[d]||(a[d]=this.wrapManagedFunction(b)),b=a[d]),b):null},removeManaged:function(a){var c=null,b=this.$resCache;if(b)if(h(b,a))c=b[a].res,delete b[a];else for(var d in b)if(b[d].res===a){c=b[d].res;delete b[d];break}return c},destroyManaged:function(b){var d=this.$resCache;if(d){for(var e in d){var h=d[e],l=!1,i=h.res;if(c.isNumber(i))t.clearTimeout(i),t.clearInterval(i),l=!0;else if(i)for(var k=0;k<z.length;k++)c.isFunction(i[z[k]])&&(a(i[z[k]],[],i),l=!0);this.trigger("destroyResource",
{resource:i,processed:l});b&&!h.hasKey&&delete d[e]}b||(this.unbind("destroyResource"),delete this.$resCache)}},wrapManagedFunction:function(b){var c=this,d=c.sign;return function(){c.sign==d&&a(b,arguments,c)}},beginAsyncUpdate:function(){return this.sign++},signature:function(){return this.sign},endAsyncUpdate:function(){return this.sign},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}});
c.mix(q,b,{prototype:!0});c.mix(q.prototype,b.prototype);return q},{requires:["magix/impl/view","magix/magix","magix/event"]});
KISSY.add("magix/vom",function(e,b,c,m){var d=document;return c.mix({iC:0,iQ:[],rootVframe:null,vframes:{},rootVframeId:"magix_vf_root",registerVframe:function(a){this.vframes[a.id]=a;this.trigger(a.id,{vframe:a},!0)},getVframe:function(a){return this.vframes[a]},unregisterVframe:function(a){a=c.isString(a)?a:a.id;delete this.vframes[a];this.unbind(a)},buildRootVframe:function(){if(!this.rootVframe)d.getElementById(this.rootVframeId)||b.createVframeNode(this.rootVframeId,d.body.firstChild),this.rootVframe=
b.createVframe(this.rootVframeId,{owner:this}),this.registerVframe(this.rootVframe)},remountRootVframe:function(a){this.$location=a.location;this.buildRootVframe();this.rootVframe.mountView(a.location.viewPath)},notifyLocationChange:function(a){this.$location=a.location;this.rootVframe&&this.rootVframe.notifyLocationChange(a)},idle:function(a,b,d){this.iC?this.iQ.push([a,b,d]):c.safeExec(a,b,d)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=this.iQ;if(a.length){a=
[].slice.call(a);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}},postMessage:function(a,b){c.isArray(a)||(a=[a]);b||(b={});for(var d=0;d<a.length;d++){var e=this.getVframe(a[d]);e?e.message(b):this.bind(a[d],function(a){a.vframe.message(b)})}}},m)},{requires:["magix/vframe","magix/magix","magix/event"]});
(function(e){var b=function(){};if(!e.console)e.console={log:b,warn:b,error:b,debug:b};if(!e.Magix)e.Magix={start:function(b){this.$tempCfg=b}},KISSY.use("magix/magix",function(b,m){var d=e.Magix.$tempCfg;e.Magix=m;d&&m.start(d)})})(this);