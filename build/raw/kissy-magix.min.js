KISSY.add("magix/event",function(d,a){var b=a.safeExec;return{trigger:function(a,c,i,j){var p="~~"+a+"_list",f=this[p];if(f){c||(c={});if(!c.type)c.type=a;if(j)for(a=f.length-1;0<=a&&!(!1===b(f[a],c,this));a--);else{a=0;for(j=f.length;a<j&&!(!1===b(f[a],c,this));a++);}}i&&delete this[p]},bind:function(b,c){var a="~~"+b+"_list";this[a]||(this[a]=[]);this[a].push(c)},unbind:function(b,a){var i="~~"+b+"_list",j=this[i];if(j)if(a)for(var i=0,p=j.length;i<p;i++){if(j[i]==a){j.splice(i,1);break}}else delete this[i]}}},
{requires:["magix/magix"]});
KISSY.add("magix/impl/magix",function(d){return{libRequire:function(a,b){d.use(a,function(a,c){b(c)})},libEnv:function(){var a=this.config(),b=a.appHome;if(!b)throw Error("please set appHome");b=b.replace(/(^|\/)app\/?/i,function(b,a){return a||"./"});a.appHome=b;if(!a.release&&/^https?:\/\//.test(b))a.release=-1==b.indexOf(location.protocol+"//"+location.host);a.release||d.config({map:[[RegExp("("+b+".+)-min\\.js(\\?[^?]+)?"),"$1.js$2"]]});d.config({packages:[{name:"app",path:b,tag:a.release?"":
d.now()+".js"}]});a.viewChangeAnim&&d.use("mxext/vfanim")},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isObject,isRegExp:d.isRegExp,isString:d.isString,isNumber:d.isNumber}});
KISSY.add("magix/impl/router",function(d){return{useHistoryState:function(){var a=this,b=location.href;d.one(window).on("popstate",function(){var d=location.href==b;if(a.$canFirePopState||!d)a.$canFirePopState=!0,a.route()})},useLocationHash:function(){var a=this;d.one(window).on("hashchange",function(){a.suspend();a.route();a.resume()})}}});
KISSY.add("magix/impl/view",function(d,a,b,n){var b=function(){},c={idIt:1,wrapAsyncUpdate:1,registerAsyncUpdateName:1,extend:1};b.extend=function(b,j){var a=function(){a.superclass.constructor.apply(this,arguments);j&&n.safeExec(j,[],this)},f;for(f in this)n.hasProp(c,f)&&(a[f]=this[f]);return d.extend(a,this,b)};n.mix(b.prototype,{getTmplByXHR:function(b,j){a({url:b,dataType:"html",success:function(b){j(b)},error:function(b,a){j(a)}})},delegateUnbubble:function(b,a){var c=this;if(!c.$cacheEvents)c.$cacheEvents=
{};b=d.one(b);b.delegate(a,"*[mx"+a+"]",c.$cacheEvents[a]=function(b){c.processEvent(b)})},undelegateUnbubble:function(b,a){var c=this.$cacheEvents;c&&(b=d.one(b),b.undelegate(a,"*[mx"+a+"]",c[a]),delete c[a])}});return b},{requires:["ajax","sizzle","magix/magix"]});
KISSY.add("magix/magix",function(d,a){var b=function(b,a){return!b?!1:Object.prototype.hasOwnProperty.call(b,a)},n=function(a,c,f){for(var l in c)if(b(c,l)&&(!f||!b(f,l)))a[l]=c[l];return a},c=function(b,a,c,l,o,q){i.isArray(b)||(b=[b]);if(!a||!i.isArray(a)&&!a.callee)a=[a];for(l=0;l<b.length;l++)try{q=b[l],o=i.isFunction(q)&&q.apply(c,a)}catch(u){d.log(u,q)}return o},i={mix:n,hasProp:b,safeExec:c,noop:function(){},templates:{},cfg:{},locals:{},config:function(b){var a=this.cfg;if(b)this.cfg=n(a,
b);return this.cfg},start:function(b){var a=this,b=a.config(b);a.libEnv();b.ready&&(c(b.ready),delete b.ready);a.libRequire("magix/router",function(b){a.libRequire("magix/vom",function(a){b.bind("locationChanged",function(b){b.changed.isViewPath()?a.remountRootVframe(b):a.notifyLocationChange(b)});b.bind("idle",function(){a.resume()});b.bind("busy",function(){a.suspend()});b.start()})})},objectKeys:function(a){if(Object.keys)return Object.keys(a);var c=[],f;for(f in a)b(a,f)&&c.push(f);return c},
local:function(a,c){var f=arguments,l=this.locals;if(0==f.length)return l;if(1==f.length)if(this.isObject(a))for(var o in a)b(a,o)&&(l[o]=a[o]);else return l[a];else l[a]=c}};return i.mix(i,a)},{requires:["magix/impl/magix"]});
KISSY.add("magix/router",function(d,a,b,n){var c=b.hasProp,i=function(b){return c(this.params,b)},j=function(){return c(this,m)},p=function(){return c(this,"viewPath")},f=function(){return this.hash[m]!=this.query[m]},l=function(b){return this.hash.params[b]!=this.query.params[b]},o=function(b){return c(this.hash.params,b)},q=function(b){return c(this.query.params,b)},u=function(b){return this.params[b]},y=b.safeExec,s=window,z=encodeURIComponent,v=decodeURIComponent,w=/\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,
A=/[^\/]*$/,x=/([#?]).*$/,t=/([^=&?\/#]+)=([^&=#?]*)/g,m="pathname",d=b.mix({iQ:[],iC:0,qH:{},compareObject:function(a,h){if(b.isObject(a)&&b.isObject(h)){for(var k=[],k=k.concat(b.objectKeys(a)),k=k.concat(b.objectKeys(h)),e=0;e<k.length;e++){var g=k[e];if(a[g]!=h[g])return!1}return!0}return a==h},getPathnameRelations:function(){if(this.$pnr)return this.$pnr;var a={virtualToReal:{},virtualRegExpToReal:{}},h=b.config().pathCfg,k=h.map,e=h.defaultView,g=h.defaultPathname;if(b.isObject(k)){for(var o in k)if(c(k,
o)){var l=o;"/"==l.charAt(l.length-1)&&(l+="index");for(var f=k[o],d=[],d=b.isArray(f)?f:b.isString(f)?f.split(","):[f],f=0;f<d.length;f++)b.isRegExp(d[f])?a.virtualRegExpToReal[l]=d[f]:(!g&&l==e&&(g=d[f]),a.virtualToReal[d[f]]=l)}e&&"/"==e.charAt(e.length-1)&&(e+="index")}if(!e)throw Error("unset defaultView");a.home=e;a[m]=g;a.hasNotFound=c(h,"notFound");a.notFound=h.notFound;return this.$pnr=a},getViewPath:function(b){var h=this.getPathnameRelations();b||(b=h[m]);var k=h.virtualToReal[b];if(!k)for(var e in h.virtualRegExpToReal)if(h.virtualRegExpToReal[e].test(b)){k=
e;break}return{viewPath:k?k:h.hasNotFound?h.notFound:h.home,pathname:k?b:h.hasNotFound?b:h[m]}},start:function(){this.supportHistoryState()?this.useHistoryState():this.useLocationHash();this.route()},supportHistoryState:function(){var a=s.history;return b.config().useHistoryState&&a.pushState&&a.replaceState},pathToObject:function(a){var h={},k={},e=s.location.protocol,g="";x.test(a)?g=a.replace(x,""):~a.indexOf("=")||(g=a);if(g)if(0==g.indexOf(e))e=g.indexOf("/",e.length+2),g=-1==e?"/":g.substring(e);
else if("/"!=g.charAt(0)&&b.config().useHistoryState&&!this.supportHistoryState()){e=s.location[m].replace(A,"");for(e+=g;w.test(e);)e=e.replace(w,"$1/");g=e}a.replace(t,function(h,b,e){k[b]=e});h[m]=g;h.params=k;return h},objectToPath:function(b){var h=b[m],k=[],e;for(e in b.params)c(b.params,e)&&k.push(e+"="+b.params[e]);return h+(k.length?"?":"")+k.join("&")},parseQueryAndHash:function(){var a=s.location.href,h=this.qH;try{a=v(a)}catch(k){}if(c(h,a))return h[a];var e=a.replace(/^[^?#]+/g,""),g=
s.location[m]+e.replace(/^([^#]+).*$/g,"$1"),e=e.replace(/^[^#]*#?/g,""),d=this.pathToObject(g),i=this.pathToObject(e.replace(/^!?/,"")),j={};b.mix(j,d.params);b.mix(j,i.params);return h[a]={isPathnameDiff:f,isParamDiff:l,hashParamsOwn:o,queryParamsOwn:q,get:u,originalQuery:g,originalHash:e,query:d,hash:i,params:j}},parseLocation:function(){var a=this.parseQueryAndHash(),h=this.getViewPath(b.config().useHistoryState?a.hash[m]?a.hash[m]:a.query[m]:a.hash[m]);return b.mix(a,h)},getChangedLocation:function(a,
h){var k={params:{}};a[m]!=h[m]&&(k[m]=!0);if(a.viewPath!=h.viewPath)k.viewPath=!0;for(var e=b.objectKeys(a.params),e=e.concat(b.objectKeys(h.params)),g=0;g<e.length;g++){var o=e[g];a.params[o]!=h.params[o]&&(k.params[o]=!0)}k.isParam=i;k.isPathname=j;k.isViewPath=p;return k},route:function(){var a=this.parseLocation(),h=this.$location||{params:{}},b=!this.$location,e;a.viewPath==(h.viewPath||"")?this.compareLocation(h,a)||(e=!0):e=!0;e&&(h=this.getChangedLocation(h,a),this.trigger("locationChanged",
{location:a,changed:h,firstFire:b}));this.$location=a;this.resume()},compareLocation:function(a,h){return a[m]!=h[m]?!1:this.compareObject(a.params,h.params)},navigate2:function(a){var h=this;a&&b.isString(a)&&h.idle(function(){if(!h.$busy)h.$busy=!0,h.trigger("busy");h.suspend();var k=h.pathToObject(a),e=b.mix({},h.$location.params),e=b.mix(e,k.params);if(k[m]){if(b.config().useHistoryState&&!h.supportHistoryState()&&(e=h.$location.query)&&(e=e.params))for(var g in e)c(e,g)&&!c(k.params,g)&&(k.params[g]=
"")}else k.params=e,k[m]=h.$location[m];h.compareLocation(k,h.$location)?h.resume():(k=h.objectToPath(k),h.supportHistoryState()?(h.$canFirePopState=!0,history.pushState(new Date,document.title,k),h.route()):location.hash="#!"+k)})},navigate:function(a,h){if(b.isObject(a)){var k=[],e;for(e in a)k.push(e+"="+z(a[e]));a=k.join("&");h&&(a=h+"?"+a)}this.navigate2(a)},idle:function(a){this.iC?this.iQ.push(a):y(a)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC)if(this.iQ.length){var a=
[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle(a.shift())}else this.trigger("idle"),delete this.$busy}},n);return b.mix(d,a)},{requires:["magix/impl/router","magix/magix","magix/event"]});
KISSY.add("magix/vframe",function(d,a,b){var n=document,c=0,i=a.safeExec,j=function(a){return"object"==typeof a?a:n.getElementById(a)},p=function(a){this.rC=0;this.rM={};this.notifyParentAlter();var b=this.view;i(b.trigger,"childrenAlter",b);this.unloadSubVframes(a)},f=function(a){this.id=f.idIt(a);this.viewId=this.id+"_view";this.children=[];this.view=null;this.rC=0;this.rM={}};a.mix(f,{tagName:"vframe",idIt:function(a){return a.id||(a.id="magix_vf_"+c++)},createVframe:function(b,o){var b=j(b),c=
new f(b);a.mix(c,o);return c},createVframeNode:function(a,b){var c=n.createElement(f.tagName);c.id=a;b.parentNode.insertBefore(c,b)}});n.createElement(f.tagName);a.mix(f.prototype,b);a.mix(f.prototype,{viewChangeUseAnim:function(){return!1},oldViewDestroy:a.noop,prepareNextView:a.noop,newViewCreated:a.noop,mountView:function(b){var c=this,f=c.viewName&&c.viewChangeUseAnim();c.unmountView(f,!0);if(b)c.viewName=b,a.libRequire(b,function(a){if(b==c.viewName){a.wrapAsyncUpdate();var d;f?(d=c.viewId,c.prepareNextView()):
d=c.id;var i=new a({viewName:b,owner:c,ownerVOM:c.owner,id:d,vId:c.viewId,vfId:c.id});i.bind("interact",function(a){c.trigger("viewLoad",{view:i},c.vced=!0);f&&c.newViewCreated(!0);a.tmpl||c.loadSubVframes();i.bind("rendered",function(){c.loadSubVframes()});i.bind("prerender",function(a){p.call(c,a.anim)})});c.view=i;i.load()}})},unmountView:function(a,b){this.view?(p.call(this,a),this.view.destroy(a),this.vced=!1,a&&b&&this.oldViewDestroy(),delete this.view,delete this.viewName):this.viewName&&(this.unbind("viewLoad"),
delete this.viewName)},loadSubVframes:function(){this.owner.suspend();var a=(j(this.viewId)||j(this.id)).getElementsByTagName(f.tagName),b=a.length;if(b)for(var c=0,d;c<b;c++)d=a[c],d=f.createVframe(d,{owner:this.owner,parentId:this.id}),this.children.push(d.id),this.owner.registerVframe(d),d.mountView(a[c].getAttribute("data-view"));else this.notifyChildrenCreated();this.owner.resume()},unloadSubVframes:function(a){for(var b=this.children,c,d=0,f=b.length,i;d<f;d++)i=b[d],c=this.owner.getVframe(i),
c.unmountView(a),this.owner.unregisterVframe(c),j(i).id="";this.children=[]},postMessageTo:function(b,c){var d=this.owner;a.isArray(b)||(b=[b]);c||(c={});for(var f=0;f<b.length;f++){var j=d.getVframe(b[f]);if(j){var n=j.view;n&&j.vced?i(n.receiveMessage,c,n):j.viewName&&j.bind("viewLoad",function(a){i(a.view.receiveMessage,c,a.view)})}}},notifyLocationChange:function(b){var c=this.view;if(c&&c.exist&&c.rendered){if(i(c.testOLChanged,b,c))var d=i(c.locationChange,b,c);if(!1!==d){if(!a.isArray(d))d=
this.children;for(var c=0,f=d.length,j;c<f;c++)(j=this.owner.getVframe(d[c]))&&i(j.notifyLocationChange,b,j)}}},notifyChildrenCreated:function(){var a=this.view;a&&i(a.trigger,"childrenCreated",a);this.notifyParentAlter(!0)},notifyParentAlter:function(b){var c=this.parentId;if(c)if(c=this.owner.getVframe(c),b)a.hasProp(c.rM,this.id)||(c.rM[this.id]=1,c.rC++,c.rC==c.children.length&&c.notifyChildrenCreated());else if(a.hasProp(c.rM,this.id))delete c.rM[this.id],c.rC--,b=c.view,i(b.trigger,"childrenAlter",
b),c.notifyParentAlter()}});return f},{requires:["magix/magix","magix/event"]});
KISSY.add("magix/view",function(d,a,b,n){var c=1,i=b.safeExec,j=b.hasProp,p="render,renderUI,updateUI".split(","),f=function(a){b.mix(this,a);this.exist=!0;this.iQ=[];this.sign=this.iC=0},l=f.prototype,o=function(a,b){return function(){var e=this,c=arguments;e.idle(function(){b&&e.sign++;a.apply(e,c)})}},q=/(?:^|\s)return(?:(?:\s+[+\-\w$'"{\[\(\/])|[+\-{\[\(\/'"])/,u=/{([\s\S]+)}/,y=/\\[\s\S]/g,s=/\s*\/\s*/g,z=/^[\s\xa0\u3000\uFEFF]*$/,v=[/[^\w$_]\/[\s\S]*?\//,/(?:'[^']*')|(?:"[^"]*")/,/{[^{}]+}/],
w=function(a){if(a=(""+a).match(u)){a=a[1];if(z.test(a))return!0;for(var a=a.replace(y,"").replace(s,""),b=0,e;b<v.length;b++)for(e=v[b];e.test(a);)a=a.replace(e,"");return q.test(a)}return!1};b.mix(f,{idIt:function(a){return a.id||(a.id="magix_mxe_"+c++)},wrapAsyncUpdate:function(){if(!this["~~"]){this["~~"]=1;var a=this.prototype,c;this.registerAsyncUpdateName();for(var e in a){c=a[e];var g=null;b.isFunction(c)&&c!=b.noop&&!c["~~"]&&!w(c)&&(j(this.$ans,e)?g=o(c,!0):j(a,e)&&!j(l,e)&&(g=o(c)),g&&
(g["~~"]=c,a[e]=g))}}},registerAsyncUpdateName:function(a){if(!this.$ans){this.$ans={};for(var c=0;c<p.length;c++)this.$ans[p[c]]=!0}if(a){b.isArray(a)||(a=[a]);for(c=0;c<a.length;c++)this.$ans[a[c]]=!0}return this}});var A={blur:1,focus:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,valuechange:1},d=f.prototype,x=document,t=window,m="abort,stop,cancel,destroy,dispose".split(","),r=function(a){return"object"==typeof a?a:x.getElementById(a)};b.mix(d,n);b.mix(d,{render:b.noop,locationChange:b.noop,
receiveMessage:b.noop,init:b.noop,hasTemplate:!0,enableEvent:!0,enableRefreshAnim:!1,load:function(){var a=this,b=a.hasTemplate,c=function(){a.suspend();i(a.render,[],a);a.delegateBubbleEvents();a.idle(function(){var c=!b&&!a.rendered;if(c)a.delegateUnbubbleEvents(),a.rendered=!0;i(a.init,[],a);c&&a.trigger("created",null,!0)});a.trigger("interact",{tmpl:b},!0);a.resume()};b?a.getTemplate(a.manage(function(b){a.template=b;c()})):c()},updateViewId:function(){this.id=r(this.vId)?this.vId:this.vfId},
setNodeHTML:function(a){r(this.id).innerHTML=a},setViewHTML:function(a){if(this.exist){var c=this.rendered;if(c){var e=b.config().viewChangeAnim&&this.enableRefreshAnim;this.trigger("refresh",null,!0,!0);this.trigger("prerender",{anim:e});this.destroyManaged(!0);this.undelegateUnBubbleEvents();this.destroyFrames();var g=this.owner;e&&(i(g.oldViewDestroy,[],g),i(g.prepareNextView,[],g),this.updateViewId())}else this.$bakHTML=r(this.id).innerHTML;this.setNodeHTML(a);e&&i(g.newViewCreated,[],g);this.delegateUnbubbleEvents();
this.rendered=!0;this.trigger("rendered");c||this.trigger("created",null,!0)}},postMessageTo:function(a,b){this.idle(this.owner.postMessageTo,[a,b],this.owner)},idle:function(a,c,e){var g=this;g.iC?g.iQ.push([a,c,e]):g.ownerVOM.idle(function(){g.exist&&b.isFunction(a)&&i(a,c,e)})},getLocation:function(){return this.ownerVOM.$location},observeLocation:function(a,c){var e=arguments;1==e.length&&(c=!1);if(e.length)this.$location={keys:b.isArray(a)?a:(""+a).split(","),pn:c}},testOLChanged:function(a){var b=
this.$location,a=a.changed;if(b){var c=!1;b.pn&&(c=a.isPathname());if(!c)for(var b=b.keys,g=0;g<b.length;g++)if(a.isParam(b[g])){c=!0;break}return c}return!0},destroyFrames:function(){for(var a=r(this.id).getElementsByTagName("iframe"),b,c;a.length;)b=a[0],c=b.parentNode,b.src="",c.removeChild(b);t.CollectGarbage&&t.CollectGarbage()},destroy:function(a){this.trigger("refresh",null,!0,!0);this.trigger("destroy",null,!0,!0);this.destroyManaged();this.undelegateUnBubbleEvents();this.undelegateBubbleEvents();
if(this.hasTemplate&&!a)this.destroyFrames(),r(this.vfId).innerHTML=this.$bakHTML||"";this.exist=!1;this.iQ=[];this.sign++},getTemplate:function(a){var c=this;if(c.template)a(c.template);else{var e=b.templates[c.viewName];if(e)a(e);else{var e=b.config(),g=e.appHome+c.viewName+".html";e.release||(g+="?_="+(new Date).getTime()+".html");c.getTmplByXHR(g,function(e){a(b.templates[c.viewName]=e)})}}},processEvent:function(a){if(this.enableEvent&&this.exist){for(var b=a.target;b&&1!=b.nodeType;)b=b.parentNode;
for(var c=b,g="mx"+a.type,d,j=r(this.vfId);c&&c!=j&&!(d=c.getAttribute(g));)c=c.parentNode;if(d)if(g=c.getAttribute("data-handler"))~[",",g,","].join().indexOf(","+this.vfId+",")||(d=0);else{for(g=c;g&&g!=j;)if("VFRAME"==g.tagName.toUpperCase()){c.setAttribute("data-handler",g.id);d=0;break}else g=g.parentNode;d&&c.setAttribute("data-handler",this.vfId)}if(d){d=d.split(":");var j=d.shift(),g=d[d.length-1],l,c=f.idIt(c);if("_halt_"==g||"_stop_"==g)a.stopPropagation(),l=!0;if("_halt_"==g||"_prevent_"==
g)a.preventDefault(),l=!0;l&&d.pop();l=this.events;for(var g=l[a.type],m=0,n;m<d.length;m++)n=d[m].lastIndexOf("@"),-1<n&&(d[d[m].substring(n+1)]=d[m].substring(0,n));g[j]&&i(g[j],{view:this,currentId:c,targetId:f.idIt(b),domEvent:a,events:l,params:d},g)}}},fixedEvent:function(a){if(!a)a=t.event;if(a){if(!a.stopPropagation)a.stopPropagation=function(){a.cancelBubble=!0};if(!a.preventDefault)a.preventDefault=function(){a.returnValue=!1};if(a.srcElement&&!a.target)a.target=a.srcElement}return a},processDelegateEvents:function(a,
b){var c=this;if(c.enableEvent){var d=c.events,f=r(c.vfId);if(c.$bubbleList&&c.$unbubbleList)for(var d=a?c.$bubbleList:c.$unbubbleList,i=0;i<d.length;i++)a?f["on"+d[i]]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)}:b?c.undelegateUnbubble(f,d[i]):c.delegateUnbubble(f,d[i]);else for(i in c.$bubbleList=[],c.$unbubbleList=[],d)j(d,i)&&(j(A,i)?(c.$unbubbleList.push(i),a||(b?c.undelegateUnbubble(f,i):c.delegateUnbubble(f,i))):(c.$bubbleList.push(i),a&&(f["on"+i]=b?null:function(a){a=c.fixedEvent(a);
c.processEvent(a)})))}},delegateBubbleEvents:function(){this.processDelegateEvents(!0)},delegateUnbubbleEvents:function(){this.processDelegateEvents()},undelegateUnBubbleEvents:function(){this.processDelegateEvents(!1,!0)},undelegateBubbleEvents:function(){this.processDelegateEvents(!0,!0)},manage:function(a,d){var e=!0;1==arguments.length&&(d=a,a="res_"+c++,e=!1);if(!this.$resCache)this.$resCache={};e={hasKey:e,res:d};b.isFunction(d)&&(d=this.wrapManagedFunction(d),e[this.sign]=d);this.$resCache[a]=
e;return d},getManaged:function(a){var c=this.$resCache,e=this.sign;return c&&j(c,a)?(a=c[a],c=a.res,b.isFunction(c)&&(a[e]||(a[e]=this.wrapManagedFunction(c)),c=a[e]),c):null},removeManaged:function(a){var b=this.$resCache;if(b)if(j(b,a))delete b[a];else for(var c in b)if(b[c].res===a){delete b[c];break}},destroyManaged:function(a){var c=this.$resCache;if(c){for(var e in c){var d=c[e],f=!1,j=d.res;if(b.isNumber(j))t.clearTimeout(j),t.clearInterval(j),f=!0;else if(j)for(var l=0;l<m.length;l++)b.isFunction(j[m[l]])&&
(i(j[m[l]],[],j),f=!0);this.trigger("destroyResource",{resource:j,processed:f});a&&!d.hasKey&&delete c[e]}a||(this.unbind("destroyResource"),delete this.$resCache)}},wrapManagedFunction:function(a){var b=this,c=b.sign;return function(){b.sign==c&&i(a,arguments,b)}},beginAsyncUpdate:function(){return this.sign++},signature:function(){return this.sign},endAsyncUpdate:function(){return this.sign},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=[].slice.call(this.iQ);
for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}});b.mix(f,a,{prototype:!0});b.mix(f.prototype,a.prototype);return f},{requires:["magix/impl/view","magix/magix","magix/event"]});
KISSY.add("magix/vom",function(d,a,b){var n=document;return{iC:0,iQ:[],rootVframe:null,vframes:{},rootVframeId:"magix_vf_root",registerVframe:function(a){this.vframes[a.id]=a},getVframe:function(a){return this.vframes[a]},unregisterVframe:function(a){delete this.vframes[b.isString(a)?a:a.id]},buildRootVframe:function(){if(!this.rootVframe)n.getElementById(this.rootVframeId)||a.createVframeNode(this.rootVframeId,n.body.firstChild),this.rootVframe=a.createVframe(this.rootVframeId,{owner:this}),this.registerVframe(this.rootVframe)},
remountRootVframe:function(a){this.$location=a.location;this.buildRootVframe();this.rootVframe.mountView(a.location.viewPath)},notifyLocationChange:function(a){this.$location=a.location;this.rootVframe&&this.rootVframe.notifyLocationChange(a)},idle:function(a,d,j){this.iC?this.iQ.push([a,d,j]):b.safeExec(a,d,j)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=this.iQ;if(a.length){a=[].slice.call(a);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}}}},
{requires:["magix/vframe","magix/magix"]});(function(d){var a=function(){};if(!d.console)d.console={log:a,warn:a,error:a,debug:a};if(!d.Magix)d.Magix={start:function(a){this.$tempCfg=a}},KISSY.use("magix/magix",function(a,n){var c=d.Magix.$tempCfg;d.Magix=n;c&&n.start(c)})})(this);