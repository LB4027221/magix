KISSY.add("magix/event",function(f,a){var b=a.safeExec;return{trigger:function(a,c,e,j){var p="~~"+a+"_list",i=this[p];if(i){c||(c={});if(!c.type)c.type=a;if(j)for(a=i.length-1;0<=a&&!(!1===b(i[a],c,this));a--);else{a=0;for(j=i.length;a<j&&!(!1===b(i[a],c,this));a++);}}e&&delete this[p]},bind:function(b,a){var e="~~"+b+"_list";this[e]||(this[e]=[]);this[e].push(a)},unbind:function(b,a){var e="~~"+b+"_list",j=this[e];if(j)if(a)for(var e=0,p=j.length;e<p;e++){if(j[e]==a){j.splice(e,1);break}}else delete this[e]}}},
{requires:["magix/magix"]});
KISSY.add("magix/impl/magix",function(f){return{libRequire:function(a,b){f.use(a,function(a,c){b(c)})},libEnv:function(){var a=this.config(),b=a.appHome;if(!b)throw Error("please set appHome");b=b.replace(/(^|\/)app\/?/i,function(b,a){return a||"./"});a.appHome=b;if(!a.release&&/^https?:\/\//.test(b))a.release=-1==b.indexOf(location.protocol+"//"+location.host);a.release||f.config({map:[[RegExp("("+b+".+)-min\\.js(\\?[^?]+)?"),"$1.js$2"]]});var l="";(l=a.release?a.appTag:f.now())&&(l+=".js");f.config({packages:[{name:"app",
path:b,tag:l}]});a.viewChangeAnim&&f.use("mxext/vfanim")},isArray:f.isArray,isFunction:f.isFunction,isObject:f.isObject,isRegExp:f.isRegExp,isString:f.isString,isNumber:f.isNumber}});
KISSY.add("magix/impl/router",function(f){return{useHistoryState:function(){var a=this,b=location.href;f.one(window).on("popstate",function(){var f=location.href==b;if(a.$canFirePopState||!f)a.$canFirePopState=!0,a.route()})},useLocationHash:function(){var a=this;f.one(window).on("hashchange",function(){a.suspend();a.route();a.resume()})}}});
KISSY.add("magix/impl/view",function(f,a,b,l){var b=function(){},c={idIt:1,wrapAsyncUpdate:1,registerAsyncUpdateName:1,extend:1};b.extend=function(b,j){var a=function(){a.superclass.constructor.apply(this,arguments);j&&l.safeExec(j,[],this)},i;for(i in this)l.hasProp(c,i)&&(a[i]=this[i]);return f.extend(a,this,b)};l.mix(b.prototype,{getTmplByXHR:function(b,j){a({url:b,dataType:"html",success:function(b){j(b)},error:function(b,a){j(a)}})},delegateUnbubble:function(b,a){var c=this;if(!c.$cacheEvents)c.$cacheEvents=
{};b=f.one(b);b.delegate(a,"*[mx"+a+"]",c.$cacheEvents[a]=function(b){c.processEvent(b)})},undelegateUnbubble:function(b,a){var c=this.$cacheEvents;c&&(b=f.one(b),b.undelegate(a,"*[mx"+a+"]",c[a]),delete c[a])}});return b},{requires:["ajax","sizzle","magix/magix"]});
KISSY.add("magix/magix",function(f,a){var b=function(b,a){return!b?!1:Object.prototype.hasOwnProperty.call(b,a)},l=function(a,c,i){for(var n in c)if(b(c,n)&&(!i||!b(i,n)))a[n]=c[n];return a},c=function(b,a,c,n,o,q){e.isArray(b)||(b=[b]);if(!a||!e.isArray(a)&&!a.callee)a=[a];for(n=0;n<b.length;n++)try{q=b[n],o=e.isFunction(q)&&q.apply(c,a)}catch(l){f.log(l,q)}return o},e={mix:l,hasProp:b,safeExec:c,noop:function(){},templates:{},cfg:{},locals:{},config:function(b){var a=this.cfg;if(b)this.cfg=l(a,
b);return this.cfg},start:function(b){var a=this,b=a.config(b);a.libEnv();b.ready&&(c(b.ready),delete b.ready);a.libRequire("magix/router",function(b){a.libRequire("magix/vom",function(a){b.bind("locationChanged",function(b){b.changed.isViewPath()?a.remountRootVframe(b):a.notifyLocationChange(b)});b.bind("idle",function(){a.resume()});b.bind("busy",function(){a.suspend()});b.start()})})},objectKeys:function(a){if(Object.keys)return Object.keys(a);var c=[],e;for(e in a)b(a,e)&&c.push(e);return c},
local:function(a,c){var e=arguments,n=this.locals;if(0==e.length)return n;if(1==e.length)if(this.isObject(a))for(var o in a)b(a,o)&&(n[o]=a[o]);else return n[a];else n[a]=c}};return e.mix(e,a)},{requires:["magix/impl/magix"]});
KISSY.add("magix/router",function(f,a,b,l){var c=b.hasProp,e=function(b){return c(this.params,b)},j=function(){return c(this,m)},p=function(){return c(this,"viewPath")},i=function(){return this.hash[m]!=this.query[m]},n=function(b){return this.hash.params[b]!=this.query.params[b]},o=function(b){return c(this.hash.params,b)},q=function(b){return c(this.query.params,b)},x=function(b){return this.params[b]},y=b.safeExec,s=window,z=encodeURIComponent,u=decodeURIComponent,v=/\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,
A=/[^\/]*$/,w=/([#?]).*$/,t=/([^=&?\/#]+)=([^&=#?]*)/g,m="pathname",f=b.mix({iQ:[],iC:0,qH:{},compareObject:function(a,h){if(b.isObject(a)&&b.isObject(h)){for(var k=[],k=k.concat(b.objectKeys(a)),k=k.concat(b.objectKeys(h)),d=0;d<k.length;d++){var g=k[d];if(a[g]!=h[g])return!1}return!0}return a==h},getPathnameRelations:function(){if(this.$pnr)return this.$pnr;var a={virtualToReal:{},virtualRegExpToReal:{}},h=b.config().pathCfg,k=h.map,d=h.defaultView,g=h.defaultPathname||"";if(b.isObject(k))for(var o in k)if(c(k,
o))for(var n=o,e=k[o],f=[],f=b.isArray(e)?e:b.isString(e)?e.split(","):[e],e=0;e<f.length;e++)b.isRegExp(f[e])?a.virtualRegExpToReal[n]=f[e]:(!g&&n==d&&(g=f[e]),a.virtualToReal[f[e]]=n);if(!d)throw Error("unset defaultView");a.virtualToReal[""]=d;a.home=d;a[m]=g;a.notFound=h.notFound;return this.$pnr=a},getViewPath:function(b){var h=this.getPathnameRelations();b||(b=h[m]);var k=h.virtualToReal[b];if(!k)for(var d in h.virtualRegExpToReal)if(h.virtualRegExpToReal[d].test(b)){k=d;break}return{viewPath:k?
k:h.notFound||h.home,pathname:k?b:h.notFound?b:h[m]}},start:function(){this.supportHistoryState()?this.useHistoryState():this.useLocationHash();this.route()},supportHistoryState:function(){var a=s.history;return b.config().useHistoryState&&a.pushState&&a.replaceState},pathToObject:function(a){var h={},k={},d=s.location.protocol,g="";w.test(a)?g=a.replace(w,""):~a.indexOf("=")||(g=a);if(g)if(0==g.indexOf(d))d=g.indexOf("/",d.length+2),g=-1==d?"/":g.substring(d);else if("/"!=g.charAt(0)&&b.config().useHistoryState&&
!this.supportHistoryState()){d=s.location[m].replace(A,"");for(d+=g;v.test(d);)d=d.replace(v,"$1/");g=d}a.replace(t,function(h,b,d){k[b]=d});h[m]=g;h.params=k;return h},objectToPath:function(b){var h=b[m],k=[],d;for(d in b.params)c(b.params,d)&&k.push(d+"="+b.params[d]);return h+(k.length?"?":"")+k.join("&")},parseQueryAndHash:function(){var a=s.location.href,h=this.qH;try{a=u(a)}catch(k){}if(c(h,a))return h[a];var d=a.replace(/^[^?#]+/g,""),g=s.location[m]+d.replace(/^([^#]+).*$/g,"$1"),d=d.replace(/^[^#]*#?/g,
""),e=this.pathToObject(g),f=this.pathToObject(d.replace(/^!?/,"")),j={};b.mix(j,e.params);b.mix(j,f.params);return h[a]={isPathnameDiff:i,isParamDiff:n,hashParamsOwn:o,queryParamsOwn:q,get:x,originalQuery:g,originalHash:d,query:e,hash:f,params:j}},parseLocation:function(){var a=this.parseQueryAndHash(),h=this.getViewPath(b.config().useHistoryState?a.hash[m]?a.hash[m]:a.query[m]:a.hash[m]);return b.mix(a,h)},getChangedLocation:function(a,h){var k={params:{}};a[m]!=h[m]&&(k[m]=!0);if(a.viewPath!=h.viewPath)k.viewPath=
!0;for(var d=b.objectKeys(a.params),d=d.concat(b.objectKeys(h.params)),g=0;g<d.length;g++){var o=d[g];a.params[o]!=h.params[o]&&(k.params[o]=!0)}k.isParam=e;k.isPathname=j;k.isViewPath=p;return k},route:function(){var b=this.parseLocation(),h=this.$location||{params:{}},a=!this.$location,d;b.viewPath==(h.viewPath||"")?this.compareLocation(h,b)||(d=!0):d=!0;d&&(h=this.getChangedLocation(h,b),this.trigger("locationChanged",{location:b,changed:h,firstFire:a}));this.$location=b;this.resume()},compareLocation:function(b,
h){return b[m]!=h[m]?!1:this.compareObject(b.params,h.params)},navigate2:function(a){var h=this;a&&b.isString(a)&&h.idle(function(){h.trigger("busy");h.suspend();var k=h.pathToObject(a),d=b.mix({},h.$location.params),d=b.mix(d,k.params);if(k[m]){if(b.config().useHistoryState&&!h.supportHistoryState()&&(d=h.$location.query)&&(d=d.params))for(var g in d)c(d,g)&&!c(k.params,g)&&(k.params[g]="")}else k.params=d,k[m]=h.$location[m];h.compareLocation(k,h.$location)?h.resume():(k=h.objectToPath(k),h.supportHistoryState()?
(h.$canFirePopState=!0,history.pushState(new Date,document.title,k),h.route()):location.hash="#!"+k)})},navigate:function(a,h){if(b.isObject(a)){var k=[],d;for(d in a)k.push(d+"="+z(a[d]));a=k.join("&");h&&(a=h+"?"+a)}this.navigate2(a)},idle:function(a){this.iC?this.iQ.push(a):y(a)},suspend:function(){this.iC++},resume:function(){0<this.iC&&(this.iC--,this.iC||(this.trigger("idle"),this.iQ.length&&this.idle(this.iQ.shift())))}},l);return b.mix(f,a)},{requires:["magix/impl/router","magix/magix","magix/event"]});
KISSY.add("magix/vframe",function(f,a,b){var l=document,c=0,e=a.safeExec,j=function(a){return"object"==typeof a?a:l.getElementById(a)},p=function(a){this.rC=0;this.rM={};this.notifyParentAlter();var b=this.view;e(b.trigger,"childrenAlter",b);this.unloadSubVframes(a)},i=function(a){this.id=i.idIt(a);this.viewId=this.id+"_view";this.children=[];this.view=null;this.rC=0;this.rM={}};a.mix(i,{tagName:"vframe",idIt:function(a){return a.id||(a.id="magix_vf_"+c++)},createVframe:function(b,o){var b=j(b),c=
new i(b);a.mix(c,o);return c},createVframeNode:function(a,b){var c=l.createElement(i.tagName);c.id=a;b.parentNode.insertBefore(c,b)}});l.createElement(i.tagName);a.mix(i.prototype,b);a.mix(i.prototype,{viewChangeUseAnim:function(){return!1},oldViewDestroy:a.noop,prepareNextView:a.noop,newViewCreated:a.noop,mountView:function(b){var c=this,e=c.viewName&&c.viewChangeUseAnim();c.unmountView(e,!0);if(b)c.viewName=b,a.libRequire(b,function(a){if(b==c.viewName){a.wrapAsyncUpdate();var f;e?(f=c.viewId,c.prepareNextView()):
f=c.id;var j=new a({viewName:b,owner:c,ownerVOM:c.owner,id:f,vId:c.viewId,vfId:c.id});j.bind("interact",function(a){c.trigger("viewLoad",{view:j},c.vced=!0);e&&c.newViewCreated(!0);a.tmpl||c.loadSubVframes();j.bind("rendered",function(){c.loadSubVframes()});j.bind("prerender",function(a){p.call(c,a.anim)})});c.view=j;j.load()}})},unmountView:function(a,b){this.view?(p.call(this,a),this.view.destroy(a),this.vced=!1,a&&b&&this.oldViewDestroy(),delete this.view,delete this.viewName):this.viewName&&(this.unbind("viewLoad"),
delete this.viewName)},loadSubVframes:function(){this.owner.suspend();var a=(j(this.viewId)||j(this.id)).getElementsByTagName(i.tagName),b=a.length;if(b)for(var c=0,e;c<b;c++)e=a[c],e=i.createVframe(e,{owner:this.owner,parentId:this.id}),this.children.push(e.id),this.owner.registerVframe(e),e.mountView(a[c].getAttribute("data-view"));else this.notifyChildrenCreated();this.owner.resume()},unloadSubVframes:function(a){for(var b=this.children,c,e=0,f=b.length,i;e<f;e++)i=b[e],c=this.owner.getVframe(i),
c.unmountView(a),this.owner.unregisterVframe(c),j(i).id="";this.children=[]},postMessageTo:function(b,c){var f=this.owner;a.isArray(b)||(b=[b]);c||(c={});for(var j=0;j<b.length;j++){var i=f.getVframe(b[j]);if(i){var l=i.view;l&&i.vced?e(l.receiveMessage,c,l):i.viewName&&i.bind("viewLoad",function(a){e(a.view.receiveMessage,c,a.view)})}}},notifyLocationChange:function(b){var c=this.view;if(c&&c.exist&&c.rendered){if(e(c.testOLChanged,b,c))var f=e(c.locationChange,b,c);if(!1!==f){if(!a.isArray(f))f=
this.children;for(var c=0,j=f.length,i;c<j;c++)(i=this.owner.getVframe(f[c]))&&e(i.notifyLocationChange,b,i)}}},notifyChildrenCreated:function(){var a=this.view;a&&e(a.trigger,"childrenCreated",a);this.notifyParentAlter(!0)},notifyParentAlter:function(b){var c=this.parentId;if(c)if(c=this.owner.getVframe(c),b)a.hasProp(c.rM,this.id)||(c.rM[this.id]=1,c.rC++,c.rC==c.children.length&&c.notifyChildrenCreated());else if(a.hasProp(c.rM,this.id))delete c.rM[this.id],c.rC--,b=c.view,e(b.trigger,"childrenAlter",
b),c.notifyParentAlter()}});return i},{requires:["magix/magix","magix/event"]});
KISSY.add("magix/view",function(f,a,b,l){var c=1,e=b.safeExec,j=b.hasProp,p="render,renderUI,updateUI".split(","),i=function(a){b.mix(this,a);this.exist=!0;this.iQ=[];this.sign=this.iC=0},n=i.prototype,o=function(a,b){return function(){var d=this,c=arguments;d.idle(function(){b&&d.sign++;a.apply(d,c)})}},q=/(?:^|\s)return(?:(?:\s+[+\-\w$'"{\[\(\/])|[+\-{\[\(\/'"])/,x=/{([\s\S]+)}/,y=/\\[\s\S]/g,s=/\s*\/\s*/g,z=/^[\s\xa0\u3000\uFEFF]*$/,u=[/[^\w$_]\/[\s\S]*?\//,/(?:'[^']*')|(?:"[^"]*")/,/{[^{}]+}/],
v=function(a){if(a=(""+a).match(x)){a=a[1];if(z.test(a))return!0;for(var a=a.replace(y,"").replace(s,""),b=0,d;b<u.length;b++)for(d=u[b];d.test(a);)a=a.replace(d,"");return q.test(a)}return!1};b.mix(i,{idIt:function(a){return a.id||(a.id="magix_mxe_"+c++)},wrapAsyncUpdate:function(){if(!this["~~"]){this["~~"]=1;var a=this.prototype,c;this.registerAsyncUpdateName();for(var d in a){c=a[d];var g=null;b.isFunction(c)&&c!=b.noop&&!c["~~"]&&!v(c)&&(j(this.$ans,d)?g=o(c,!0):j(a,d)&&!j(n,d)&&(g=o(c)),g&&
(g["~~"]=c,a[d]=g))}}},registerAsyncUpdateName:function(a){if(!this.$ans){this.$ans={};for(var c=0;c<p.length;c++)this.$ans[p[c]]=!0}if(a){b.isArray(a)||(a=[a]);for(c=0;c<a.length;c++)this.$ans[a[c]]=!0}return this}});var A={submit:1,blur:1,focus:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,valuechange:1},f=i.prototype,w=document,t=window,m="abort,stop,cancel,destroy,dispose".split(","),r=function(a){return"object"==typeof a?a:w.getElementById(a)};b.mix(f,l);b.mix(f,{render:b.noop,
locationChange:b.noop,receiveMessage:b.noop,init:b.noop,hasTemplate:!0,enableEvent:!0,enableRefreshAnim:!1,load:function(){var a=this,b=a.hasTemplate,c=function(){a.suspend();e(a.render,[],a);a.delegateBubbleEvents();a.idle(function(){var c=!b&&!a.rendered;if(c)a.delegateUnbubbleEvents(),a.rendered=!0;e(a.init,[],a);c&&a.trigger("created",null,!0)});a.trigger("interact",{tmpl:b},!0);a.resume()};b?a.getTemplate(a.manage(function(b){a.template=b;c()})):c()},updateViewId:function(){this.id=r(this.vId)?
this.vId:this.vfId},setNodeHTML:function(a){r(this.id).innerHTML=a},setViewHTML:function(a){if(this.exist){var c=this.rendered;if(c){var d=b.config().viewChangeAnim&&this.enableRefreshAnim;this.trigger("refresh",null,!0,!0);this.trigger("prerender",{anim:d});this.destroyManaged(!0);this.undelegateUnBubbleEvents();this.destroyFrames();var g=this.owner;d&&(e(g.oldViewDestroy,[],g),e(g.prepareNextView,[],g),this.updateViewId())}else this.$bakHTML=r(this.id).innerHTML;this.setNodeHTML(a);d&&e(g.newViewCreated,
[],g);this.delegateUnbubbleEvents();this.rendered=!0;this.trigger("rendered");c||this.trigger("created",null,!0)}},postMessageTo:function(a,b){this.idle(this.owner.postMessageTo,[a,b],this.owner)},idle:function(a,c,d){var g=this;g.iC?g.iQ.push([a,c,d]):g.ownerVOM.idle(function(){g.exist&&b.isFunction(a)&&e(a,c,d)})},getLocation:function(){return this.ownerVOM.$location},observeLocation:function(a,c){var d=arguments;1==d.length&&(c=!1);if(d.length)this.$location={keys:b.isArray(a)?a:(""+a).split(","),
pn:c}},testOLChanged:function(a){var b=this.$location,a=a.changed;if(b){var c=!1;b.pn&&(c=a.isPathname());if(!c)for(var b=b.keys,g=0;g<b.length;g++)if(a.isParam(b[g])){c=!0;break}return c}return!0},destroyFrames:function(){for(var a=r(this.id).getElementsByTagName("iframe"),b,c;a.length;)b=a[0],c=b.parentNode,b.src="",c.removeChild(b);t.CollectGarbage&&t.CollectGarbage()},destroy:function(a){this.trigger("refresh",null,!0,!0);this.trigger("destroy",null,!0,!0);this.destroyManaged();this.undelegateUnBubbleEvents();
this.undelegateBubbleEvents();if(this.hasTemplate&&!a)this.destroyFrames(),r(this.vfId).innerHTML=this.$bakHTML||"";this.exist=!1;this.iQ=[];this.sign++},getTemplate:function(a){var c=this;if(c.template)a(c.template);else{var d=b.templates[c.viewName];if(d)a(d);else{var d=b.config(),g=d.appHome+c.viewName+".html";d.release||(g+="?_="+(new Date).getTime()+".html");c.getTmplByXHR(g,function(d){a(b.templates[c.viewName]=d)})}}},processEvent:function(a){if(this.enableEvent&&this.exist){for(var b=a.target;b&&
1!=b.nodeType;)b=b.parentNode;for(var c=b,g="mx"+a.type,f,j=r(this.vfId);c&&c!=j&&!(f=c.getAttribute(g));)c=c.parentNode;if(f)if(g=c.getAttribute("data-handler"))~[",",g,","].join().indexOf(","+this.vfId+",")||(f=0);else{for(g=c;g&&g!=j;)if("VFRAME"==g.tagName.toUpperCase()){c.setAttribute("data-handler",g.id);f=0;break}else g=g.parentNode;f&&c.setAttribute("data-handler",this.vfId)}if(f){f=f.split(":");var j=f.shift(),g=f[f.length-1],l,c=i.idIt(c);if("_halt_"==g||"_stop_"==g)a.stopPropagation(),
l=!0;if("_halt_"==g||"_prevent_"==g)a.preventDefault(),l=!0;l&&f.pop();l=this.events;for(var g=l[a.type],m=0,n;m<f.length;m++)n=f[m].lastIndexOf("@"),-1<n&&(f[f[m].substring(n+1)]=f[m].substring(0,n));g[j]&&e(g[j],{view:this,currentId:c,targetId:i.idIt(b),domEvent:a,events:l,params:f},g)}}},fixedEvent:function(a){if(!a)a=t.event;if(a){if(!a.stopPropagation)a.stopPropagation=function(){a.cancelBubble=!0};if(!a.preventDefault)a.preventDefault=function(){a.returnValue=!1};if(a.srcElement&&!a.target)a.target=
a.srcElement}return a},processDelegateEvents:function(a,b){var c=this;if(c.enableEvent){var g=c.events,f=r(c.vfId);if(c.$bubbleList&&c.$unbubbleList)for(var g=a?c.$bubbleList:c.$unbubbleList,e=0;e<g.length;e++)a?f["on"+g[e]]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)}:b?c.undelegateUnbubble(f,g[e]):c.delegateUnbubble(f,g[e]);else for(e in c.$bubbleList=[],c.$unbubbleList=[],g)j(g,e)&&(j(A,e)?(c.$unbubbleList.push(e),a||(b?c.undelegateUnbubble(f,e):c.delegateUnbubble(f,e))):(c.$bubbleList.push(e),
a&&(f["on"+e]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)})))}},delegateBubbleEvents:function(){this.processDelegateEvents(!0)},delegateUnbubbleEvents:function(){this.processDelegateEvents()},undelegateUnBubbleEvents:function(){this.processDelegateEvents(!1,!0)},undelegateBubbleEvents:function(){this.processDelegateEvents(!0,!0)},manage:function(a,e){var d=!0;1==arguments.length&&(e=a,a="res_"+c++,d=!1);if(!this.$resCache)this.$resCache={};d={hasKey:d,res:e};b.isFunction(e)&&(e=this.wrapManagedFunction(e),
d[this.sign]=e);this.$resCache[a]=d;return e},getManaged:function(a){var c=this.$resCache,d=this.sign;return c&&j(c,a)?(a=c[a],c=a.res,b.isFunction(c)&&(a[d]||(a[d]=this.wrapManagedFunction(c)),c=a[d]),c):null},removeManaged:function(a){var b=this.$resCache;if(b)if(j(b,a))delete b[a];else for(var c in b)if(b[c].res===a){delete b[c];break}},destroyManaged:function(a){var c=this.$resCache;if(c){for(var d in c){var f=c[d],j=!1,i=f.res;if(b.isNumber(i))t.clearTimeout(i),t.clearInterval(i),j=!0;else if(i)for(var l=
0;l<m.length;l++)b.isFunction(i[m[l]])&&(e(i[m[l]],[],i),j=!0);this.trigger("destroyResource",{resource:i,processed:j});a&&!f.hasKey&&delete c[d]}a||(this.unbind("destroyResource"),delete this.$resCache)}},wrapManagedFunction:function(a){var b=this,c=b.sign;return function(){b.sign==c&&e(a,arguments,b)}},beginAsyncUpdate:function(){return this.sign++},signature:function(){return this.sign},endAsyncUpdate:function(){return this.sign},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;
if(!this.iC){var a=[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}});b.mix(i,a,{prototype:!0});b.mix(i.prototype,a.prototype);return i},{requires:["magix/impl/view","magix/magix","magix/event"]});
KISSY.add("magix/vom",function(f,a,b){var l=document;return{iC:0,iQ:[],rootVframe:null,vframes:{},rootVframeId:"magix_vf_root",registerVframe:function(a){this.vframes[a.id]=a},getVframe:function(a){return this.vframes[a]},unregisterVframe:function(a){delete this.vframes[b.isString(a)?a:a.id]},buildRootVframe:function(){if(!this.rootVframe)l.getElementById(this.rootVframeId)||a.createVframeNode(this.rootVframeId,l.body.firstChild),this.rootVframe=a.createVframe(this.rootVframeId,{owner:this}),this.registerVframe(this.rootVframe)},
remountRootVframe:function(a){this.$location=a.location;this.buildRootVframe();this.rootVframe.mountView(a.location.viewPath)},notifyLocationChange:function(a){this.$location=a.location;this.rootVframe&&this.rootVframe.notifyLocationChange(a)},idle:function(a,e,f){this.iC?this.iQ.push([a,e,f]):b.safeExec(a,e,f)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=this.iQ;if(a.length){a=[].slice.call(a);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}}}},
{requires:["magix/vframe","magix/magix"]});(function(f){var a=function(){};if(!f.console)f.console={log:a,warn:a,error:a,debug:a};if(!f.Magix)f.Magix={start:function(a){this.$tempCfg=a}},KISSY.use("magix/magix",function(a,l){var c=f.Magix.$tempCfg;f.Magix=l;c&&l.start(c)})})(this);