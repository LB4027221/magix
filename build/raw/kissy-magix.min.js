KISSY.add("magix/event",function(e,b){var a=b.safeExec;return{trigger:function(b,c,h,j){var i="~~"+b+"_list",d=this[i];if(d){c||(c={});if(!c.type)c.type=b;if(j)for(b=d.length-1;0<=b&&!(!1===a(d[b],c,this));b--);else{b=0;for(j=d.length;b<j&&!(!1===a(d[b],c,this));b++);}}h&&delete this[i]},bind:function(a,b){var h="~~"+a+"_list";this[h]||(this[h]=[]);this[h].push(b)},unbind:function(a,b){var h="~~"+a+"_list",j=this[h];if(j)if(b)for(var h=0,i=j.length;h<i;h++){if(j[h]==b){j.splice(h,1);break}}else delete this[h]}}},
{requires:["magix/magix"]});
KISSY.add("magix/impl/magix",function(e){return{include:function(b){var b=e.Config.packages.magix.path+b+".js?r="+Math.random(),a=new (window.ActiveXObject||window.XMLHttpRequest)("Microsoft.XMLHTTP");a.open("GET",b,!1);a.send(null);return a.responseText},libRequire:function(b,a){e.use(b,function(b,c){a(c)})},libEnv:function(){var b=this.config(),a=b.appHome;if(!a)throw Error("please set appHome");a=a.replace(/(^|\/)app\/?/i,function(a,b){return b||"./"});b.appHome=a;if(!b.release&&/^https?:\/\//.test(a))b.release=
-1==a.indexOf(location.protocol+"//"+location.host);b.release||e.config({map:[[RegExp("("+a+".+)-min\\.js(\\?[^?]+)?"),"$1.js$2"]]});e.config({packages:[{name:"app",path:a,tag:b.release?"":e.now()}]});b.viewChangeAnim&&e.use("mxext/vfanim")},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isObject,isRegExp:e.isRegExp,isString:e.isString,isNumber:e.isNumber}});
KISSY.add("magix/impl/router",function(e){return{useHistoryState:function(){var b=this,a=location.href;e.one(window).on("popstate",function(){var e=location.href==a;if(b.$canFirePopState||!e)b.$canFirePopState=!0,b.route()})},useLocationHash:function(){var b=this;e.one(window).on("hashchange",function(){b.suspend();b.route();b.resume()})}}});
KISSY.add("magix/impl/view",function(e,b,a,l){var a=function(){},c={idIt:1,wrapAsyncUpdate:1,registerAsyncUpdateName:1,extend:1};a.extend=function(a,b){var i=function(){i.superclass.constructor.apply(this,arguments);b&&l.safeExec(b,[],this)},d;for(d in this)l.hasProp(c,d)&&(i[d]=this[d]);return e.extend(i,this,a)};l.mix(a.prototype,{getTmplByXHR:function(a,c){b({url:a,dataType:"html",success:function(a){c(a)},error:function(a,d){c(d)}})},delegateUnbubble:function(a,b){var i=this;if(!i.$cacheEvents)i.$cacheEvents=
{};a=e.one(a);a.delegate(b,"*[mx"+b+"]",i.$cacheEvents[b]=function(a){i.processEvent(a)})},undelegateUnbubble:function(a,b){var i=this.$cacheEvents;i&&(a=e.one(a),a.undelegate(b,"*[mx"+b+"]",i[b]),delete i[b])}});return a},{requires:["ajax","sizzle","magix/magix"]});
KISSY.add("magix/magix",function(e,b){var a=function(a,d){return!a?!1:Object.prototype.hasOwnProperty.call(a,d)},l=function(b,d,o){for(var c in d)if(a(d,c)&&(!o||!a(o,c)))b[c]=d[c];return b},c=function(a,d,b,c,h,e){j.isArray(a)||(a=[a]);if(!d||!j.isArray(d)&&!d.callee)d=[d];for(c=0;c<a.length;c++)try{e=a[c],h=j.isFunction(e)&&e.apply(b,d)}catch(u){}return h},h=function(){throw Error("unimplement method");},j={isArray:h,isObject:h,isFunction:h,isRegExp:h,isString:h,isNumber:h,libRequire:h,include:h,
libEnv:h,mix:l,unimpl:h,hasProp:a,safeExec:c,noop:function(){},templates:{},cfg:{},locals:{},config:function(a){var d=this.cfg;if(a)this.cfg=l(d,a);return this.cfg},start:function(a){var d=this,a=d.config(a);d.libEnv();a.ready&&(c(a.ready),delete a.ready);d.libRequire("magix/router",function(a){d.libRequire("magix/vom",function(d){a.bind("locationChanged",function(a){a.changed.isViewPathChanged()?d.remountRootVframe(a):d.notifyLocationChange(a)});a.bind("idle",function(){d.resume()});a.bind("busy",
function(){d.suspend()});a.start()})})},objectKeys:function(b){if(Object.keys)return Object.keys(b);var d=[],c;for(c in b)a(b,c)&&d.push(c);return d},local:function(b,d){var c=arguments,h=this.locals;if(0==c.length)return h;if(1==c.length)if(this.isObject(b))for(var e in b)a(b,e)&&(h[e]=b[e]);else return h[b];else h[b]=d}};return j.mix(j,b)},{requires:["magix/impl/magix"]});
KISSY.add("magix/router",function(e,b,a,l){var c=a.hasProp,h=function(a){return c(this.params,a)},j=function(){return c(this,m)},i=function(){return c(this,"viewPath")},d=function(){return this.hash[m]!=this.query[m]},o=function(a){return this.hash.params[a]!=this.query.params[a]},t=function(a){return c(this.hash.params,a)},x=function(a){return c(this.query.params,a)},n=function(a){return this.params[a]},u=a.safeExec,p=window,y=encodeURIComponent,s=decodeURIComponent,v=/\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,
z=/[^\/]*$/,w=/([#?]).*$/,r=/([^=&?\/#]+)=([^&=#?]*)/g,m="pathname",e=a.mix({iQ:[],iC:0,useHistoryState:a.unimpl,useLocationHash:a.unimpl,compareObject:function(d,g){if(a.isObject(d)&&a.isObject(g)){for(var k=[],k=k.concat(a.objectKeys(d)),k=k.concat(a.objectKeys(g)),f=0;f<k.length;f++){var b=k[f];if(d[b]!=g[b])return!1}return!0}return d==g},getPathnameRelations:function(){if(this.$pnr)return this.$pnr;var d={virtualToReal:{},virtualRegExpToReal:{}},g=a.config().pathCfg,k=g.map,f=g.defaultView,b=
g.defaultPathname;if(a.isObject(k)){for(var o in k)if(c(k,o)){var h=o;"/"==h.charAt(h.length-1)&&(h+="index");for(var e=k[o],i=[],i=a.isArray(e)?e:a.isString(e)?e.split(","):[e],e=0;e<i.length;e++)a.isRegExp(i[e])?d.virtualRegExpToReal[h]=i[e]:(!b&&h==f&&(b=i[e]),d.virtualToReal[i[e]]=h)}f&&"/"==f.charAt(f.length-1)&&(f+="index")}if(!f||!b)throw Error("unset defaultPathname or defaultView attribute for pathCfg");d.home=f;d[m]=b;d.hasNotFound=c(g,"notFound");d.notFound=g.notFound;return this.$pnr=
d},getViewPath:function(a){var g=this.getPathnameRelations();a||(a=g[m]);var k=g.virtualToReal[a];if(!k)for(var f in g.virtualRegExpToReal)if(g.virtualRegExpToReal[f].test(a)){k=f;break}return{viewPath:k?k:g.hasNotFound?g.notFound:g.home,pathname:k?a:g.hasNotFound?a:g[m]}},start:function(){this.supportHistoryState()?this.useHistoryState():this.useLocationHash();this.route()},supportHistoryState:function(){var d=p.history;return a.config().useHistoryState&&d.pushState&&d.replaceState},pathToObject:function(d){var g=
{},k={},f=p.location.protocol,b="";w.test(d)?b=d.replace(w,""):~d.indexOf("=")||(b=d);if(b)if(0==b.indexOf(f))f=b.indexOf("/",f.length+2),b=-1==f?"/":b.substring(f);else if("/"!=b.charAt(0)&&a.config().useHistoryState&&!this.supportHistoryState()){f=p.location[m].replace(z,"");for(f+=b;v.test(f);)f=f.replace(v,"$1/");b=f}d.replace(r,function(g,a,f){k[a]=f});g[m]=b;g.params=k;return g},objectToPath:function(a){var g=a[m],k=[],f;for(f in a.params)c(a.params,f)&&k.push(f+"="+a.params[f]);return g+(k.length?
"?":"")+k.join("&")},parseQueryAndHash:function(){var b=s(p.location.href).replace(/^[^?#]+/g,""),g=p.location[m]+b.replace(/^([^#]+).*$/g,"$1"),b=b.replace(/^[^#]*#?/g,""),k=this.pathToObject(g),f=this.pathToObject(b.replace(/^!?/,"")),c={};a.mix(c,k.params);a.mix(c,f.params);return{isPathnameDiff:d,isParamDiff:o,hashParamsHas:t,queryParamsHas:x,get:n,originalQuery:g,originalHash:b,query:k,hash:f,params:c}},parseLocation:function(){var d=this.parseQueryAndHash(),g=this.getViewPath(a.config().useHistoryState?
d.hash[m]?d.hash[m]:d.query[m]:d.hash[m]);return a.mix(d,g)},getChangedLocation:function(d,g){var k={params:{}};d[m]!=g[m]&&(k[m]=!0);if(d.viewPath!=g.viewPath)k.viewPath=!0;for(var f=a.objectKeys(d.params),f=f.concat(a.objectKeys(g.params)),b=0;b<f.length;b++){var c=f[b];d.params[c]!=g.params[c]&&(k.params[c]=!0)}k.isParamChanged=h;k.isPathnameChanged=j;k.isViewPathChanged=i;return k},route:function(){var a=this.parseLocation(),g=this.$location||{params:{}},k=!this.$location,f;a.viewPath==(g.viewPath||
"")?this.compareLocation(g,a)||(f=!0):f=!0;f&&(g=this.getChangedLocation(g,a),this.trigger("locationChanged",{location:a,changed:g,isFirstFired:k}));this.$location=a;this.$referrer=s(p.location.href);this.resume()},compareLocation:function(a,g){return a[m]!=g[m]?!1:this.compareObject(a.params,g.params)},navigate2:function(d){var g=this;d&&a.isString(d)&&g.idle(function(){g.suspend();g.trigger("busy");var k=g.pathToObject(d),f=a.mix({},g.$location.params),f=a.mix(f,k.params);if(k[m]){if(a.config().useHistoryState&&
!g.supportHistoryState()&&(f=g.$location.query)&&(f=f.params))for(var b in f)c(f,b)&&!c(k.params,b)&&(k.params[b]="")}else k.params=f,k[m]=g.$location[m];g.compareLocation(k,g.$location)?g.resume():(k=g.objectToPath(k),g.supportHistoryState()?(g.$canFirePopState=!0,history.pushState(new Date,document.title,k),g.route()):location.hash="#!"+k)})},navigate:function(d,g){if(a.isObject(d)){var k=[],f;for(f in d)k.push(f+"="+y(d[f]));d=k.join("&");g&&(d=g+"?"+d)}this.navigate2(d)},idle:function(a){this.iC?
this.iQ.push(a):u(a)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC)if(this.iQ.length){var a=[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle(a.shift())}else this.trigger("idle")}},l);return a.mix(e,b)},{requires:["magix/impl/router","magix/magix","magix/event"]});
KISSY.add("magix/vframe",function(e,b,a){var l=document,c=0,h=b.safeExec,j=function(a){return"object"==typeof a?a:l.getElementById(a)},i=function(a){this.id=i.idIt(a);this.viewId=this.id+"_view";this.children=[];this.view=null;this.ready={o:{},c:0}};b.mix(i,{tagName:"vframe",idIt:function(a){return a.id||(a.id="magix_vf_"+c++)},createVframe:function(a,c){var a=j(a),h=new i(a);b.mix(h,c);return h},createVframeNode:function(a,b){var c=l.createElement(i.tagName);c.id=a;b.parentNode.insertBefore(c,b)}});
l.createElement(i.tagName);b.mix(i.prototype,a);b.mix(i.prototype,{viewChangeUseAnim:function(){return!1},oldViewDestroy:b.noop,prepareNextView:b.noop,newViewCreated:b.noop,mountView:function(a){var c=this,h=c.viewName&&c.viewChangeUseAnim();c.unmountView(h,!0);if(a)c.viewName=a,b.libRequire(a,function(b){if(a!=c.viewName)c.unbind("viewLoad");else{b.wrapAsyncUpdate();var e;h?(e=c.viewId,c.prepareNextView()):e=c.id;var i=new b({viewName:a,owner:c,ownerVOM:c.owner,id:e,vId:c.viewId,vfId:c.id});i.bind("ready",
function(a){i.bind("created",function(){c.trigger("viewLoad",{view:i},!0);c.viewCreated=!0});h&&c.newViewCreated(!0);a.tmpl||c.loadSubVframes();i.bind("rendered",function(){c.loadSubVframes()});i.bind("prerender",function(a){c.unloadSubVframes(a.anim)})});c.view=i;i.load()}})},unmountView:function(a,b){this.view?(this.unloadSubVframes(a),this.view.destroy(a),a&&b&&this.oldViewDestroy(),delete this.view,delete this.viewName):this.viewName&&(this.unbind("viewLoad"),this.unbind("childrenCreated"),delete this.viewName)},
loadSubVframes:function(){var a=this;a.owner.suspend();var c=(j(a.viewId)||j(a.id)).getElementsByTagName(i.tagName),h=c.length;if(h)for(var e=0,n;e<h;e++)n=c[e],n=i.createVframe(n,{owner:a.owner,parentId:a.id}),a.children.push(n.id),a.owner.registerVframe(n),n.bind("childrenCreated",function(){var c=a.ready,h=this.id;b.hasProp(c.o,h)||(c.o[h]=1,c.c++);if(c.c==a.children.length)a.ready={o:{},c:0},a.notifyChildrenCreated()}),n.mountView(c[e].getAttribute("data-view"));else a.notifyChildrenCreated();
a.owner.resume()},unloadSubVframes:function(a){for(var b=this.children,c,h=0,e=b.length,i;h<e;h++)i=b[h],c=this.owner.getVframe(i),c.unmountView(a),this.owner.unregisterVframe(c),j(i).id="";this.children=[]},postMessageTo:function(a,c){var e=this.owner;b.isArray(a)||(a=[a]);c||(c={});for(var i=0;i<a.length;i++){var j=e.getVframe(a[i]);if(j){var l=j.view;l?l.rendered?h(l.receiveMessage,c,l):l.bind("created",function(){h(this.receiveMessage,c,this)}):j.viewName&&j.bind("viewLoad",function(a){h(a.view.receiveMessage,
c,a.view)})}}},notifyLocationChange:function(a){var c=this.view;if(c&&c.exist&&c.rendered){if(h(c.testObserveLocationChanged,a,c))var e=h(c.locationChange,a,c);if(!1!==e){if(!b.isArray(e))e=this.children;for(var c=0,i=e.length,j;c<i;c++)(j=this.owner.getVframe(e[c]))&&h(j.notifyLocationChange,a,j)}}},notifyChildrenCreated:function(){var a=this,b=function(){var b=a.view;b&&h(b.trigger,"childrenCreated",b);a.trigger("childrenCreated")};a.viewCreated?b():a.bind("viewLoad",b)}});return i},{requires:["magix/magix",
"magix/event"]});
KISSY.add("magix/view",function(e,b,a,l){var c=1,h=a.safeExec,j=a.hasProp,i=["render","renderUI","updateUI"],d=function(g){a.mix(this,g);this.exist=!0;this.iQ=[];this.sign=this.iC=0},o=d.prototype,t=function(a,b){return function(){var f=this,c=arguments;f.idle(function(){b&&f.sign++;a.apply(f,c)})}},x=/(?:^|\s)return(?:(?:\s+[+\-\w$'"{\[\(\/])|[+\-{\[\(\/'"])/,n=/{([\s\S]+)}/,u=/\\[\s\S]/g,p=/\s*\/\s*/g,y=/^[\s\xa0\u3000\uFEFF]*$/,s=[/[^\w$_]\/[\s\S]*?\//,/(?:'[^']*')|(?:"[^"]*")/,/{[^{}]+}/],v=function(a){if(a=
(""+a).match(n)){a=a[1];if(y.test(a))return!0;for(var a=a.replace(u,"").replace(p,""),b=0,f;b<s.length;b++)for(f=s[b];f.test(a);)a=a.replace(f,"");return x.test(a)}return!1};a.mix(d,{idIt:function(a){return a.id||(a.id="magix_mxe_"+c++)},wrapAsyncUpdate:function(){if(!this["~~"]){this["~~"]=1;var g=this.prototype,b;this.registerAsyncUpdateName();for(var f in g){b=g[f];var c=null;a.isFunction(b)&&b!=a.noop&&!b["~~"]&&!v(b)&&(j(this.$ans,f)?c=t(b,!0):j(g,f)&&!j(o,f)&&(c=t(b)),c&&(c["~~"]=b,g[f]=c))}}},
registerAsyncUpdateName:function(g){if(!this.$ans){this.$ans={};for(var b=0;b<i.length;b++)this.$ans[i[b]]=!0}if(g){a.isArray(g)||(g=[g]);for(b=0;b<g.length;b++)this.$ans[g[b]]=!0}return this}});var z={blur:1,focus:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,valuechange:1},e=d.prototype,w=document,r=window,m=["abort","stop","cancel","destroy","dispose"],q=function(a){return"object"==typeof a?a:w.getElementById(a)};a.mix(e,l);a.mix(e,{getTmplByXHR:a.unimpl,delegateUnbubble:a.unimpl,
undelegateUnbubble:a.unimpl,render:a.noop,locationChange:a.noop,receiveMessage:a.noop,init:a.noop,hasTemplate:!0,enableEvent:!0,enableRefreshAnim:!1,load:function(){var g=this,b=function(){g.suspend();h(g.render,[],g);g.delegateBubbleEvents();g.idle(function(){if(!g.rendered)g.delegateUnbubbleEvents(),g.rendered=!0;h(g.init,[],g);g.trigger("created",null,!0);var b=a.config().viewLoad;a.isFunction(b)&&h(b,{name:g.viewName,location:g.getLocation()})});g.trigger("ready",{tmpl:g.hasTemplate},!0);g.resume()};
g.hasTemplate?g.getTemplate(g.manage(function(a){g.template=a;b()})):b()},updateViewId:function(){this.id=q(this.vId)?this.vId:this.vfId},setNodeHTML:function(a){q(this.id).innerHTML=a},setViewHTML:function(b){if(this.exist){this.trigger("refresh",null,!0,!0);var c=a.config().viewChangeAnim&&this.rendered&&this.enableRefreshAnim;this.trigger("prerender",{anim:c});this.destroyManaged(!0);this.undelegateUnBubbleEvents();this.destroyFrames();var f=this.owner;c&&(h(f.oldViewDestroy,[],f),h(f.prepareNextView,
[],f),this.updateViewId());if(!this.rendered)this.$bakHTML=q(this.id).innerHTML;this.setNodeHTML(b);c&&h(f.newViewCreated,[],f);this.delegateUnbubbleEvents();this.rendered=!0;this.trigger("rendered")}},postMessageTo:function(a,b){this.idle(this.owner.postMessageTo,[a,b],this.owner)},idle:function(b,c,f){var d=this;d.iC?d.iQ.push([b,c,f]):d.ownerVOM.idle(function(){d.exist&&a.isFunction(b)&&h(b,c,f)})},getLocation:function(){return this.ownerVOM.$location},observeLocation:function(b,c){var f=arguments;
1==f.length&&(c=!1);if(f.length)this.$location={keys:a.isArray(b)?b:(""+b).split(","),pathname:c}},testObserveLocationChanged:function(a){var b=this.$location,a=a.changed;if(b){var c=!1;b.pathname&&(c=a.isPathnameChanged(b.pathname));if(!c)for(var b=b.keys,d=0;d<b.length;d++)if(a.isParamChanged(b[d])){c=!0;break}return c}return!0},destroyFrames:function(){for(var a=q(this.id).getElementsByTagName("iframe"),b,c;a.length;)b=a[0],c=b.parentNode,b.src="",c.removeChild(b);r.CollectGarbage&&r.CollectGarbage()},
destroy:function(a){this.trigger("refresh",null,!0,!0);this.trigger("destroy",null,!0,!0);this.destroyManaged();this.undelegateUnBubbleEvents();this.undelegateBubbleEvents();if(this.hasTemplate&&!a)this.destroyFrames(),q(this.vfId).innerHTML=this.$bakHTML||"";this.exist=!1;this.iQ=[];this.sign++},getTemplate:function(b){var c=this;if(c.template)b(c.template);else{var f=a.templates[c.viewName];if(f)b(f);else{var f=a.config(),d=f.appHome+c.viewName+".html";f.release||(d+="?_="+(new Date).getTime());
c.getTmplByXHR(d,function(f){b(a.templates[c.viewName]=f)})}}},processEvent:function(a){if(this.enableEvent&&this.exist){for(var b=a.target,c=b;1!=c.nodeType;)c=c.parentNode;for(var e="mx"+a.type,i=c.getAttribute(e),j=q(this.vfId);!i&&c!=j;)c=c.parentNode,i=c.getAttribute(e);if(i){var e=i.split(":"),i=e.shift(),j=e[e.length-1],l,c=d.idIt(c);if("_halt_"==j||"_stop_"==j)a.stopPropagation(),l=!0;if("_halt_"==j||"_prevent_"==j)a.preventDefault(),l=!0;l&&e.pop();l=this.events;for(var j=l[a.type],m=0,n;m<
e.length;m++)n=e[m].lastIndexOf("@"),-1<n&&(e[e[m].substring(n+1)]=e[m].substring(0,n));j[i]&&h(j[i],{view:this,currentId:c,targetId:d.idIt(b),domEvent:a,events:l,params:e},j)}}},fixedEvent:function(a){if(!a)a=r.event;if(a){if(!a.stopPropagation)a.stopPropagation=function(){a.cancelBubble=!0};if(!a.preventDefault)a.preventDefault=function(){a.returnValue=!1};if(a.srcElement&&!a.target)a.target=a.srcElement}return a},processDelegateEvents:function(a,b){var c=this;if(c.enableEvent){var d=c.events,e=
q(c.vfId);if(c.$bubbleList&&c.$unbubbleList)for(var d=a?c.$bubbleList:c.$unbubbleList,h=0;h<d.length;h++)a?e["on"+d[h]]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)}:b?c.undelegateUnbubble(e,d[h]):c.delegateUnbubble(e,d[h]);else for(h in c.$bubbleList=[],c.$unbubbleList=[],d)j(d,h)&&(j(z,h)?(c.$unbubbleList.push(h),a||(b?c.undelegateUnbubble(e,h):c.delegateUnbubble(e,h))):(c.$bubbleList.push(h),a&&(e["on"+h]=b?null:function(a){a=c.fixedEvent(a);c.processEvent(a)})))}},delegateBubbleEvents:function(){this.processDelegateEvents(!0)},
delegateUnbubbleEvents:function(){this.processDelegateEvents()},undelegateUnBubbleEvents:function(){this.processDelegateEvents(!1,!0)},undelegateBubbleEvents:function(){this.processDelegateEvents(!0,!0)},manage:function(b,d){var f=!0;1==arguments.length&&(d=b,b="res_"+c++,f=!1);if(!this.$resCache)this.$resCache={};f={hasKey:f,res:d};a.isFunction(d)&&(d=this.wrapManagedFunction(d),f[this.sign]=d);this.$resCache[b]=f;return d},getManaged:function(b){var c=this.$resCache,d=this.sign;return c&&j(c,b)?
(b=c[b],c=b.res,a.isFunction(c)&&(b[d]||(b[d]=this.wrapManagedFunction(c)),c=b[d]),c):null},removeManaged:function(a){var b=this.$resCache;if(b)if(j(b,a))delete b[a];else for(var c in b)if(b[c].res===a){delete b[c];break}},destroyManaged:function(b){var c=this.$resCache;if(c){for(var d in c){var e=c[d],i=!1,j=e.res;if(a.isNumber(j))r.clearTimeout(j),r.clearInterval(j),i=!0;else if(j)for(var l=0;l<m.length;l++)a.isFunction(j[m[l]])&&(h(j[m[l]],[],j),i=!0);this.trigger("destroyResource",{resource:j,
processed:i});b&&!e.hasKey&&delete c[d]}b||(this.unbind("destroyResource"),delete this.$resCache)}},wrapManagedFunction:function(a){var b=this,c=b.sign;return function(){b.sign==c&&h(a,arguments,b)}},beginAsyncUpdate:function(){return this.sign++},signature:function(){return this.sign},endAsyncUpdate:function(){return this.sign},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=[].slice.call(this.iQ);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}});
a.mix(d,b,{prototype:!0});a.mix(d.prototype,b.prototype);return d},{requires:["magix/impl/view","magix/magix","magix/event"]});
KISSY.add("magix/vom",function(e,b,a){var l=document;return{iC:0,iQ:[],rootVframe:null,vframes:{},rootVframeId:"magix_vf_root",registerVframe:function(a){this.vframes[a.id]=a},getVframe:function(a){return this.vframes[a]},unregisterVframe:function(b){delete this.vframes[a.isString(b)?b:b.id]},buildRootVframe:function(){if(!this.rootVframe)l.getElementById(this.rootVframeId)||b.createVframeNode(this.rootVframeId,l.body.firstChild),this.rootVframe=b.createVframe(this.rootVframeId,{owner:this}),this.registerVframe(this.rootVframe)},
remountRootVframe:function(a){this.$location=a.location;this.buildRootVframe();this.rootVframe.mountView(a.location.viewPath)},notifyLocationChange:function(a){this.$location=a.location;this.rootVframe&&this.rootVframe.notifyLocationChange(a)},idle:function(b,e,j){this.iC?this.iQ.push([b,e,j]):a.safeExec(b,e,j)},suspend:function(){this.iC++},resume:function(){0<this.iC&&this.iC--;if(!this.iC){var a=this.iQ;if(a.length){a=[].slice.call(a);for(this.iQ=[];a.length;)this.idle.apply(this,a.shift())}}}}},
{requires:["magix/vframe","magix/magix"]});(function(e){var b=function(){};if(!e.console)e.console={log:b,warn:b,error:b,debug:b};if(!e.Magix)e.Magix={start:function(a){this.$tempCfg=a}},KISSY.use("magix/magix",function(a,b){var c=e.Magix.$tempCfg;e.Magix=b;c&&b.start(c)})})(this);