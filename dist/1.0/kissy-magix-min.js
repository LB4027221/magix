KISSY.add("magix/body",function(e,a,t,u){var i={},l=a.has,e=a.mix,s=a.listToMap("submit,focusin,focusout,mouseenter,mouseleave,mousewheel,change"),j=document.body,m={},r={},q=65536,o=function(a,b,g){g?a.setAttribute(b,g):g=a.getAttribute(b);return g},a=e({processEvent:function(a){for(var b=a.target||a.srcElement;b&&1!=b.nodeType;)b=b.parentNode;var g=b,i=a.type,h=r[i]||(r[i]=RegExp("(?:^|,)"+i+"(?:,|$)"));if(!h.test(o(b,"mx-ie"))){for(var x="mx-"+i,c,n,e=[];g&&g!=j&&!(c=o(g,x),n=o(g,"mx-ie"),c||h.test(n));)e.push(g),
g=g.parentNode;if(c){i=o(g,"mx-owner");if(!i){h=g;for(n=this.VOM.all();h&&h!=j;)if(l(n,h.id)){o(g,"mx-owner",i=h.id);break}else h=h.parentNode}if(i)this.fire("event",{info:c,se:a,tId:b.id||(b.id="mx-e-"+q--),cId:g.id||(g.id="mx-e-"+q--),hld:i});else throw Error("miss mx-owner:"+c);}else for(;e.length;)a=e.shift(),n=o(a,"mx-ie"),h.test(n)||(n=n?n+","+i:i,o(a,"mx-ie",n))}},attachEvent:function(a){var b=this;if(m[a])m[a]++;else if(m[a]=1,s[a])b.onUnbubble(j,a);else j["on"+a]=function(a){(a=a||window.event)&&
b.processEvent(a)}},detachEvent:function(a){var b=m[a];0<b&&(b--,b||(s[a]?this.offUnbubble(j,a):j["on"+a]=null),m[a]=b)}},t);a.onUnbubble=function(a,b){var g=this;u.delegate(a,b,"*[mx-"+b+"]",i[b]=function(a){g.processEvent(a)})};a.offUnbubble=function(a,b){u.undelegate(a,b,"*[mx-"+b+"]",i[b]);delete i[b]};return a},{requires:["magix/magix","magix/event","event"]});
KISSY.add("magix/event",function(e,a){var t=a.safeExec;return{fire:function(a,i,e,s){var j="~"+a,m=this[j];if(m){i||(i={});if(!i.type)i.type=a;for(var a=m.length,r=a-1,q,o;a--;)q=s?a:r-a,o=m[q],o.d&&(m.splice(q,1),r--),t(o,i,this)}e&&delete this[j]},on:function(e,i,l){e="~"+e;this[e]||(this[e]=[]);a.isNumeric(l)?this[e].splice(l,0,i):(i.d=l,this[e].push(i))},un:function(e,i){a.isArray(e)||(e=[e]);for(var l=0,s=e.length;l<s;l++){var j="~"+e[l],m=this[j];if(m)if(i)for(var j=0,r=m.length;j<r;j++){if(m[j]==
i){m.splice(j,1);break}}else delete this[j]}}}},{requires:["magix/magix"]});
KISSY.add("magix/magix",function(e){var a=[].slice,t=/\/\.\/|\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,u=/[^\/]*$/,i=/[#?].*$/,l=/([^=&?\/#]+)=([^&=#?]*)/g,s=/^https?:\/\//i,j={},m=0,r={debug:false,iniFile:"~/ini",appName:"app",appHome:"./",tagName:"vframe",rootId:"magix_vf_root"},q=j.hasOwnProperty,o=function(k){return function(a,d,f){switch(arguments.length){case 0:f=k;break;case 1:f=w.isObject(a)?v(k,a):g(k,a)?k[a]:null;break;case 2:null===d?(delete k[a],f=d):k[a]=f=d}return f}},p=function(k){this.c=
[];this.x=k||20;this.b=this.x+5},b=function(k){return new p(k)},g=function(k,a){return k?q.call(k,a):0},v=function(k,a,d){for(var f in a)if(!d||!g(d,f))k[f]=a[f];return k};v(p.prototype,{get:function(k){var a=this.c,d,k="pathname"+k;if(g(a,k)&&(d=a[k],1<=d.f))d.f++,d.t=m++,d=d.v;return d},set:function(k,a){var d=this.c,k="pathname"+k,f=d[k];if(!g(d,k)){if(d.length>=this.b){d.sort(function(d,f){return f.f==d.f?f.t-d.t:f.f-d.f});for(var c=this.b-this.x;c--;)f=d.pop(),delete d[f.k]}f={};d.push(f);d[k]=
f}f.k=k;f.v=a;f.f=1;f.t=m++;return f},del:function(k){var k="pathname"+k,a=this.c,d=a[k];if(d)d.f=-1E5,d.v="",delete a[k]},has:function(a){return g(this.c,"pathname"+a)}});var h=b(60),x=b(),c=function(a,c,d,f,b,h){w.isArray(a)||(a=[a]);if(!c||!w.isArray(c)&&!c.callee)c=[c];for(f=0;f<a.length;f++)try{h=a[f],b=w.isFunction(h)&&h.apply(d,c)}catch(e){}return b},n=function(){},w={isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},mix:v,has:g,safeExec:c,noop:n,config:o(r),start:function(a){var b=
this,a=v(r,a);b.libEnv(a);var d=a.iniFile.replace("~",a.appName);b.libRequire(d,function(d){r=v(a,d,a);var c=a.progress;b.libRequire(["magix/router","magix/vom"],function(d,f){d.on("changed",function(d){d.loc?f.locUpdated(d.loc):d.changed.isView()?f.mountRoot(d):f.locChanged(d)});f.on("progress",c||n);b.libRequire(a.extensions,function(){d.start()})})});a.ready&&(c(a.ready),delete a.ready)},keys:Object.keys||function(a){var c=[],d;for(d in a)g(a,d)&&c.push(d);return c},local:o({}),path:function(a,
c){var d=a+"\n"+c,f=x.get(d);if(!f){a=a.replace(i,"").replace(u,"");"/"==c.charAt(0)?(f=a.indexOf("://"),-1==f?f=c:(f=a.indexOf("/",f+3),f=-1==f?a+c:a.substring(0,f)+c)):f=a+c;for(;t.test(f);)f=f.replace(t,"$1/");x.set(d,f)}return f},pathToObject:function(a,c){var d=h.get(a);if(!d){var d={},f={},b="";i.test(a)?b=a.replace(i,""):~a.indexOf("=")||(b=a);if(b&&s.test(b))var e=b.indexOf("/",8),b=-1==e?"/":b.substring(e);a.replace(l,function(d,a,b){if(c)try{b=decodeURIComponent(b)}catch(k){}f[a]=b});d.pathname=
b;d.params=f;h.set(a,d)}return d},objectToPath:function(a,c){var d=a.pathname,f=[],b=a.params,h,e;for(e in b)h=b[e],c&&encodeURIComponent(h),f.push(e+"="+h);return d+(d&&f.length?"?":"")+f.join("&")},tmpl:function(a,c){return 1==arguments.length?{v:j[a],h:g(j,a)}:j[a]=c},listToMap:function(a,c){var d,f,b={},h;this.isString(a)&&(a=a.split(","));if(a&&(h=a.length))for(d=0;d<h;d++)f=a[d],b[c?f[c]:f]=c?f:1;return b},createCache:b};return v(w,{libRequire:function(c,b){if(c){var d=e.isFunction(b),f=e.isArray(c);
e.use(f?c.join(","):c,d?function(d){b.apply(d,a.call(arguments,1))}:e.noop)}else b()},libEnv:function(a){var c=a.appHome,d=location,f=d.protocol,b=a.appName;~c.indexOf(f)||(c=this.path(d.href,c));e.endsWith(c,"/")||(c+="/");a.appHome=c;var h=a.debug;h&&(h=0==c.indexOf(f+"//"+d.host));"~"==b.charAt(0)&&e.config({map:[[RegExp("/"+b+"/"),"/"]]});d="";(d=h?e.now():a.appTag)&&(d+=".js");f=a.appCombine;e.isUndefined(f)&&(f=e.config("combine"));e.config({packages:[{name:b,path:c,debug:a.debug=h,combine:f,
tag:d}]})},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isObject,isRegExp:e.isRegExp,isString:e.isString,isNumber:e.isNumber})});
KISSY.add("magix/router",function(e,a,t,u){var i=window,l=a.has,s=a.mix,j=document,m=/^UTF-8$/i.test(j.charset||j.characterSet||"UTF-8"),r=a.config(),q=a.createCache(),o=a.createCache(),p,b,g,v=65536,h=/#.*$/,x=/^[^#]*#?!?/,c=r.nativeHistory,n,w,k=function(d,f,c){if(d){c=this.params;a.isArray(d)||(d=d.split(","));for(var b=0;b<d.length&&!(f=l(c,d[b]));b++);}return f},z=function(){return l(this,"pathname")},d=function(){return l(this,"view")},f=function(){return this.hash.pathname!=this.query.pathname},
y=function(d){return this.hash.params[d]!=this.query.params[d]},A=function(d){return l(this.hash.params,d)},B=function(d){return l(this.query.params,d)},C=function(d){return this.params[d]},e=s({getView:function(d){if(!g){g={routes:r.routes||{},e404:r.notFoundView};var f=r.defaultView;if(!f)throw Error("unset defaultView");g.home=f;var c=r.defaultPathname||"";g.routes[c]=f;g.pathname=c}d||(d=g.pathname);f=g.routes;f=a.isFunction(f)?f.call(r,d):f[d];return{view:f?f:g.e404||g.home,pathname:f?d:g.e404?
d:g.pathname}},start:function(){var d=i.history;n=c&&d.pushState;w=c&&!n;n?this.useState():this.useHash();this.route()},path:function(d){var d=a.pathToObject(d,m),f=d.pathname;f&&w&&(d.pathname=a.path(i.location.pathname,f));return d},parseQH:function(d,a){var d=d||i.location.href,b=q.get(d);if(!b){var b=d.replace(h,""),e=d.replace(x,""),k=this.path(b),g=this.path(e),n={};s(n,k.params);s(n,g.params);b={pathnameDiff:f,paramDiff:y,hashOwn:A,queryOwn:B,get:C,href:d,srcQuery:b,srcHash:e,query:k,hash:g,
params:n};q.set(d,b)}a&&!b.view&&(e=this.getView(c?b.hash.pathname||b.query.pathname:b.hash.pathname),s(b,e));return b},getChged:function(a,f){var c=f.href,b=a.href+"\n"+c,h=o.get(b);h||(b=c+"\n"+b,h=o.get(b));if(!h){var e,h={params:{}};if(a.pathname!=f.pathname)e=h.pathname=1;if(a.view!=f.view)e=h.view=1;var c=a.params,n=f.params,g;for(g in c)c[g]!=n[g]&&(e=1,h.params[g]=1);for(g in n)c[g]!=n[g]&&(e=1,h.params[g]=1);h.occur=e;h.isParam=k;h.isPathname=z;h.isView=d;o.set(b,h)}return h},route:function(){var d=
this.parseQH(0,1),a=b||{params:{},href:"~"},f=!b;b=d;a=this.getChged(a,d);a.occur&&(p=d,this.fire("changed",{location:d,changed:a,force:f}))},navigate:function(d,f){!f&&a.isObject(d)&&(f=d,d="");f&&(d=a.objectToPath({params:f,pathname:d},m));if(d){var c=this.path(d),b={};b.params=s({},c.params);b.pathname=c.pathname;if(b.pathname){if(w&&(c=p.query)&&(c=c.params))for(var h in c)l(c,h)&&!l(b.params,h)&&(b.params[h]="")}else h=s({},p.params),b.params=s(h,b.params),b.pathname=p.pathname;h=a.objectToPath(b);
if(n?h!=p.srcQuery:h!=p.srcHash)n?(this.popFired=1,history.pushState(v--,j.title,h),this.route()):(s(b,p,b),b.srcHash=h,b.hash={params:b.params,pathname:b.pathname},this.fire("changed",{loc:p=b}),location.hash="#!"+h)}}},t);e.useState=function(){var d=this,a=location.href;u.on(i,"popstate",function(){var f=location.href==a;if(d.popFired||!f)d.popFired=1,d.route()})};e.useHash=function(){var d=this;u.on(i,"hashchange",function(){d.route()})};return e},{requires:["magix/magix","magix/event","event"]});
KISSY.add("magix/vframe",function(e,a,t,u){var i=document,l=65536,s=window.CollectGarbage||a.noop,j=a.mix,e=a.config(),m=e.tagName,r=e.rootId,q=a.has,o,p,b=function(a){return"object"==typeof a?a:i.getElementById(a)};i.createElement(m);var g=/<script[^>]*>[\s\S]*?<\/script>/ig,v=function(a){this.id=a;this.vId=a+"_v";this.cM={};this.rC=this.cC=0;this.sign=-2147483648;this.rM={}};j(v,{root:function(a){if(!o){var e=b(r);if(!e)e=i.createElement(m),e.id=r,i.body.insertBefore(e,i.body.firstChild);o=new v(r);
a.add(o)}return o}});j(j(v.prototype,t),{useAnimUpdate:a.noop,oldViewDestroy:a.noop,prepareNextView:a.noop,newViewCreated:a.noop,mountView:function(h,e){var c=this,n=b(c.id);n._bak?n._chgd=1:(n._bak=1,n._tmpl=n.innerHTML.replace(g,""));var i=c.viewUsable&&c.useAnimUpdate();c.unmountView(i,1);if(h){var k=a.pathToObject(h),m=k.pathname,d=--c.sign;a.libRequire(m,function(a){if(d==c.sign){var h=c.owner;u.prepare(a,{$:b,path:m,vom:h});var g;i?(g=c.vId,c.prepareNextView()):g=c.id;var l=new a({owner:c,id:g,
vId:c.vId,vfId:c.id,location:h.getLoc()});c.view=l;l.on("interact",function(d){c.fire("viewInteract",{view:l});c.viewUsable=1;i&&c.newViewCreated(1);if(!d.tmpl){if(!i&&n._chgd)n.innerHTML=n._tmpl;c.mountZoneVframes(0,0,1)}l.on("rendered",function(){c.mountZoneVframes(0,0,1)});l.on("prerender",function(d){c.unmountZoneVframes(0,d.anim)})},0);e=e||{};l.load(j(e,k.params,e))}})}},unmountView:function(a,e){if(this.view){p||(p={caused:this.id});this.unmountZoneVframes(0,a);this.childrenAlter(p);this.view.destroy();
var c=b(this.id);if(!a&&c._bak)c.innerHTML=c._tmpl;a&&e&&this.oldViewDestroy();delete this.view;delete this.viewUsable;p=0;this.fire("viewUnmounted");s()}this.un("viewInteract");this.sign--},mountVframe:function(a,b,c,e){var g=this.owner,k=g.get(a);if(!k)k=new v(a),k.pId=this.id,q(this.cM,a)||this.cC++,this.cM[a]=e,g.add(k);k.mountView(b,c);return k},mountZoneVframes:function(a,e,c){this.unmountZoneVframes(a);var a=a?a:b(this.vId)||b(this.id),a=b(a).getElementsByTagName(m),g=a.length,i={};if(g)for(var k=
0,j,d,f,y;k<g;k++){j=a[k];d=j.id||(j.id="magix_vf_"+l--);q(i,d)||(f=j.getAttribute("mx-view"),y=j.getAttribute("mx-defer"),(!y||f)&&this.mountVframe(d,f,e,c));j=b(j).getElementsByTagName(m);d=0;for(f=j.length;d<f;d++)i[j[d].id||(j[d].id="magix_vf_"+l--)]=1}this.cC==this.rC&&this.childrenCreated({})},unmountVframe:function(a,b){var a=a||this.id,c=this.owner,e=c.get(a);if(e){var g=e.fcc;e.unmountView(b);c.remove(a,g);if((c=c.get(e.pId))&&q(c.cM,a))delete c.cM[a],c.cC--}},unmountZoneVframes:function(a,
e){var c;if(a){c=b(a).getElementsByTagName(m);for(var g={},i=this.cM,k=c.length-1,j;0<=k;k--)j=c[k].id,q(i,j)&&(g[j]=1);c=g}else c=this.cM;for(var d in c)this.unmountVframe(d,e)},childrenCreated:function(a){var b=this.view;if(b&&!this.fcc)this.fcc=1,delete this.fca,b.fire("created",a),this.fire("created",a);var c=this.owner;c.childCreated();b=this.id;if((c=c.get(this.pId))&&!q(c.rM,b))c.rM[b]=c.cM[b],c.rC++,c.rC==c.cC&&c.childrenCreated(a)},childrenAlter:function(a){delete this.fcc;if(!this.fca){var b=
this.view,c=this.id;if(b)this.fca=1,b.fire("alter",a),this.fire("alter",a);if((b=this.owner.get(this.pId))&&q(b.rM,c)){var e=b.rM[c];b.rC--;delete b.rM[c];e&&b.childrenAlter(a)}}},locationChanged:function(b,e){var c=this.view;if(c&&c.sign&&(c.location=b,c.rendered)){var g=c.olChanged(e),i={location:b,changed:e,prevent:function(){this.cs=[]},toChildren:function(d){d=d||[];a.isString(d)&&(d=d.split(","));this.cs=d}};g&&a.safeExec(c.locationChange,i,c);for(var c=i.cs||a.keys(this.cM),g=0,i=c.length,
k=this.owner,j;g<i;g++)(j=k.get(c[g]))&&j.locationChanged(b,e)}},locationUpdated:function(a){var b=this.view;if(b&&b.sign){b.location=a;var b=this.cM,c,e=this.owner,g;for(g in b)(c=e.get(g))&&c.locationUpdated(a)}}});return v},{requires:["magix/magix","magix/event","magix/view"]});
KISSY.add("magix/view",function(e,a,t,u,i){var l=e.Env.mods,s={wrapAsyn:1,extend:1},j=function(d,b,c){for(var g in b)e.isObject(b[g])?(a.has(d,g)||(d[g]={}),j(d[g],b[g],!0)):c&&(d[g]=b[g])},m=a.safeExec,r=a.has,q=[],o=a.config(),p=/^~[^\/]*/,b=a.mix,g=a.listToMap("render,renderUI"),v=function(a){return function(){var b;this.sign&&(this.sign++,this.fire("rendercall"),b=a.apply(this,arguments));return b}},h=function(a){b(this,a);this.sign=1};b(h,{wrapAsyn:function(){if(!this["~~"]){this["~~"]=1;var d=
this.prototype,b,c;for(c in d){b=d[c];var e=null;a.isFunction(b)&&b!=a.noop&&!b["~~"]&&r(g,c)&&(e=v(b),e["~~"]=b,d[c]=e)}}}});var x=h.prototype,c=window.CollectGarbage||a.noop,n=/\smx-[^ohv][a-z]+\s*=/g,w={prevent:function(a){a=a||this.domEvent;a.preventDefault?a.preventDefault():a.returnValue=!1},stop:function(a){a=a||this.domEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},halt:function(a){this.prevent(a);this.stop(a)}},k=/(\w+)(?:<(\w+)>)?(?:{([\s\S]*)})?/,z=/(\w+):([^,]+)/g;b(x,
t);b(x,{render:a.noop,locationChange:a.noop,init:a.noop,hasTmpl:!0,enableEvent:!0,enableAnim:!1,load:function(){var a=this,b=a.hasTmpl,c=arguments,e=a.sign,g=function(){if(e==a.sign&&(a.delegateEvents(),a.fire("interact",{tmpl:b},1),m(a.init,c,a),m(a.render,q,a),!b&&!a.rendered))a.rendered=!0,a.fire("primed",null,1)};b&&!r(a,"template")?a.planTmpl(g):g()},updateViewId:function(){this.id=this.$(this.vId)?this.vId:this.vfId},beginUpdateHTML:function(){if(this.sign&&this.rendered){var a=this.enableAnim;
this.fire("refresh",0,1);this.fire("prerender",{anim:a});var b=this.owner;a&&(m(b.oldViewDestroy,q,b),m(b.prepareNextView,q,b),this.updateViewId())}},endUpdateHTML:function(){if(this.sign){if(this.rendered&&this.enableAnim){var a=this.owner;m(a.newViewCreated,q,a)}this.rendered||this.fire("primed",null,1);this.rendered=!0;this.fire("rendered");c()}},wrapMxEvent:function(a){return a?(""+a).replace(n,' mx-owner="'+this.vfId+'"$&'):a},setViewHTML:function(a){this.beginUpdateHTML();if(this.sign)this.$(this.id).innerHTML=
this.wrapMxEvent(a);this.endUpdateHTML()},observeLocation:function(d){var b;if(!this.$ol)this.$ol={keys:[]};b=this.$ol;var c=b.keys;if(a.isObject(d))b.pn=d.pathname,d=d.keys;if(d)b.keys=c.concat(a.isString(d)?d.split(","):d)},olChanged:function(a){var b=this.$ol;if(b){var c=0;b.pn&&(c=a.isPathname());c||(c=a.isParam(b.keys));return c}return 1},destroy:function(){this.fire("refresh",0,1);this.fire("destroy",0,1,1);this.delegateEvents(1);this.sign=0},parentView:function(){var a=this.vom.get(this.owner.pId),
b=null;if(a&&a.viewUsable)b=a.view;return b},planTmpl:function(b){var c=this,e=a.tmpl(c.path);e.h?(c.template=e.v,b()):(e=c.home+c.path.replace(p,"")+".html",c.fetchTmpl(e,function(e){c.template=a.tmpl(c.path,e);b()},o.debug))},processEvent:function(a){if(this.enableEvent&&this.sign){var c=a.se,e=a.info.match(k),g=e[1],h=e[2],e=e[3],i=this.events;if(i){var j=i[c.type];if(w[h])w[h](c);if(j&&j[g]){var l={};e&&e.replace(z,function(a,b,d){l[b]=d});m(j[g],b({view:this,currentId:a.cId,targetId:a.tId,domEvent:c,
events:i,params:l},w),j)}}}},delegateEvents:function(a){var b=this.events,a=a?u.detachEvent:u.attachEvent,c;for(c in b)a.call(u,c)}});h.prototype.fetchTmpl=function(b,c,g){var h=j[b];h?h.push(c):(h=j[b]=[c],i({url:b+(g?"?_="+e.now():""),success:function(c){a.safeExec(h,c);delete j[b]},error:function(c,e){a.safeExec(h,e);delete j[b]}}))};h.extend=function(b,c){var g=function(){g.superclass.constructor.apply(this,arguments);c&&a.safeExec(c,arguments,this)};g.extend=this.extend;return e.extend(g,this,
b)};h.prepare=function(b,c){if(!b.wrapAsyn){for(var e in this)a.has(s,e)&&(b[e]=this[e]);e=b.prototype;for(var g=b;g.superclass;)g=g.superclass.constructor,j(e,g.prototype);c.home=l[c.path].packageInfo.getBase();a.mix(e,c)}b.wrapAsyn()};return h},{requires:["magix/magix","magix/event","magix/body","ajax"]});
KISSY.add("magix/vom",function(e,a,t,u,i){var l=t.has,s=0,j=0,m=0,r=0,q={},o,p=t.mix({all:function(){return q},add:function(a){if(!l(q,a.id))s++,q[a.id]=a,a.owner=p,p.fire("add",{vframe:a})},get:function(a){return q[a]},remove:function(a,e){var i=q[a];i&&(s--,e&&j--,delete q[a],p.fire("remove",{vframe:i}))},childCreated:function(){if(!r){j++;var a=j/s;m<a&&(p.fire("progress",{percent:m=a}),1==a&&(r=1,p.un("progress")))}},root:function(){return a.root(p)},mountRoot:function(a){var e=p.root();o=a.location;
e.mountView(o.view)},locChanged:function(a){o=a.location;p.root().locationChanged(o,a.changed)},locUpdated:function(a){o=a;p.root().locationUpdated(a)},getLoc:function(){return o}},u);i.VOM=p;i.on("event",function(a){var e=p.get(a.hld);(e=e&&e.view)&&e.processEvent(a)});return p},{requires:["magix/vframe","magix/magix","magix/event","magix/body"]});
(function(e){var a=function(){};if(!e.console)e.console={log:a,info:a,error:a};var t,u={};if(!e.Magix)e.Magix={config:function(a){for(var e in a)u[e]=a[e]},start:function(a){t=a}},KISSY.use("magix/magix",function(a,l){e.Magix=l;l.config(u);t&&l.start(t)})})(this);