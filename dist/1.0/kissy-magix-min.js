KISSY.add("magix/body",function(e,a,t,u){var g={},n=a.has,e=a.mix,r=a.listToMap("submit,focusin,focusout,mouseenter,mouseleave,mousewheel,change"),j=document.body,l={},q={},p=65536,k=function(a,d,h){h?a.setAttribute(d,h):h=a.getAttribute(d);return h},a=e({processEvent:function(a){for(var d=a.target||a.srcElement;d&&1!=d.nodeType;)d=d.parentNode;var h=d,g=a.type,i=q[g]||(q[g]=RegExp("(?:^|,)"+g+"(?:,|$)"));if(!i.test(k(d,"mx-ie"))){for(var x="mx-"+g,c,s,e=[];h&&h!=j&&!(c=k(h,x),s=k(h,"mx-ie"),c||i.test(s));)e.push(h),
h=h.parentNode;if(c){g=k(h,"mx-owner");if(!g){i=h;for(s=this.VOM.all();i&&i!=j;)if(n(s,i.id)){k(h,"mx-owner",g=i.id);break}else i=i.parentNode}if(g)this.fire("event",{info:c,se:a,tId:d.id||(d.id="mx-e-"+p--),cId:h.id||(h.id="mx-e-"+p--),hld:g});else throw Error("miss mx-owner:"+c);}else for(;e.length;)a=e.shift(),s=k(a,"mx-ie"),i.test(s)||(s=s?s+","+g:g,k(a,"mx-ie",s))}},attachEvent:function(a){var d=this;if(l[a])l[a]++;else if(l[a]=1,r[a])d.onUnbubble(j,a);else j["on"+a]=function(a){(a=a||window.event)&&
d.processEvent(a)}},detachEvent:function(a){var d=l[a];0<d&&(d--,d||(r[a]?this.offUnbubble(j,a):j["on"+a]=null),l[a]=d)}},t);a.onUnbubble=function(a,d){var h=this;u.delegate(a,d,"*[mx-"+d+"]",g[d]=function(a){h.processEvent(a)})};a.offUnbubble=function(a,d){u.undelegate(a,d,"*[mx-"+d+"]",g[d]);delete g[d]};return a},{requires:["magix/magix","magix/event","event"]});
KISSY.add("magix/event",function(e,a){var t=a.safeExec;return{fire:function(a,g,e,r){var j="~"+a,l=this[j];if(l){g||(g={});if(!g.type)g.type=a;for(var a=l.length,q=a-1,p,k;a--;)p=r?a:q-a,k=l[p],k.d&&(l.splice(p,1),q--),t(k,g,this)}e&&delete this[j]},on:function(e,g,n){e="~"+e;this[e]||(this[e]=[]);a.isNumeric(n)?this[e].splice(n,0,g):(g.d=n,this[e].push(g))},un:function(e,g){a.isArray(e)||(e=[e]);for(var n=0,r=e.length;n<r;n++){var j="~"+e[n],l=this[j];if(l)if(g)for(var j=0,q=l.length;j<q;j++){if(l[j]==
g){l.splice(j,1);break}}else delete this[j]}}}},{requires:["magix/magix"]});
KISSY.add("magix/magix",function(e){var a=[].slice,t=/\/\.\/|\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/,u=/[^\/]*$/,g=/[#?].*$/,n=/([^=&?\/#]+)=([^&=#?]*)/g,r=/^https?:\/\//i,j={},l=0,q={debug:false,iniFile:"~/ini",appName:"app",appHome:"./",tagName:"vframe",rootId:"magix_vf_root"},p=j.hasOwnProperty,k=function(m){return function(a,b,f){switch(arguments.length){case 0:f=m;break;case 1:f=w.isObject(a)?v(m,a):h(m,a)?m[a]:null;break;case 2:null===b?(delete m[a],f=b):m[a]=f=b}return f}},o=function(m){this.c=
[];this.x=m||20;this.b=this.x+5},d=function(m){return new o(m)},h=function(m,a){return m?p.call(m,a):0},v=function(m,a,b){for(var f in a)if(!b||!h(b,f))m[f]=a[f];return m};v(o.prototype,{get:function(m){var a=this.c,b,m="pathname"+m;if(h(a,m)&&(b=a[m],1<=b.f))b.f++,b.t=l++,b=b.v;return b},set:function(m,a){var b=this.c,m="pathname"+m,f=b[m];if(!h(b,m)){if(b.length>=this.b){b.sort(function(b,f){return f.f==b.f?f.t-b.t:f.f-b.f});for(var c=this.b-this.x;c--;)f=b.pop(),delete b[f.k]}f={};b.push(f);b[m]=
f}f.k=m;f.v=a;f.f=1;f.t=l++;return f},del:function(a){var a="pathname"+a,c=this.c,b=c[a];if(b)b.f=-1E5,b.v="",delete c[a]},has:function(a){return h(this.c,"pathname"+a)}});var i=d(60),x=d(),c=function(a,c,b,f,d,i){w.isArray(a)||(a=[a]);if(!c||!w.isArray(c)&&!c.callee)c=[c];for(f=0;f<a.length;f++)try{i=a[f],d=w.isFunction(i)&&i.apply(b,c)}catch(e){}return d},s=function(){},w={isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},mix:v,has:h,safeExec:c,noop:s,config:k(q),start:function(a){var d=
this,a=v(q,a);d.libEnv(a);var b=a.iniFile.replace("~",a.appName);d.libRequire(b,function(b){q=v(a,b,a);var c=a.progress;d.libRequire(["magix/router","magix/vom"],function(b,f){b.on("changed",function(b){b.loc?f.locUpdated(b.loc):b.changed.isView()?f.mountRoot(b):f.locChanged(b)});f.on("progress",c||s);d.libRequire(a.extensions,function(){b.start()})})});a.ready&&(c(a.ready),delete a.ready)},keys:Object.keys||function(a){var c=[],b;for(b in a)h(a,b)&&c.push(b);return c},local:k({}),path:function(a,
c){var b=a+"\n"+c,f=x.get(b);if(!f){a=a.replace(g,"").replace(u,"");"/"==c.charAt(0)?(f=a.indexOf("://"),-1==f?f=c:(f=a.indexOf("/",f+3),f=-1==f?a+c:a.substring(0,f)+c)):f=a+c;for(;t.test(f);)f=f.replace(t,"$1/");x.set(b,f)}return f},pathToObject:function(a,c){var b=i.get(a);if(!b){var b={},f={},d="";g.test(a)?d=a.replace(g,""):~a.indexOf("=")||(d=a);if(d&&r.test(d))var e=d.indexOf("/",8),d=-1==e?"/":d.substring(e);a.replace(n,function(b,a,A){if(c)try{A=decodeURIComponent(A)}catch(d){}f[a]=A});b.pathname=
d;b.params=f;i.set(a,b)}return b},objectToPath:function(a,c){var b=a.pathname,f=[],d=a.params,i,e;for(e in d)i=d[e],c&&encodeURIComponent(i),f.push(e+"="+i);return b+(b&&f.length?"?":"")+f.join("&")},tmpl:function(a,c){return 1==arguments.length?{v:j[a],h:h(j,a)}:j[a]=c},listToMap:function(a,c){var b,f,d={},i;this.isString(a)&&(a=a.split(","));if(a&&(i=a.length))for(b=0;b<i;b++)f=a[b],d[c?f[c]:f]=c?f:1;return d},createCache:d};return v(w,{libRequire:function(c,d){if(c){var b=e.isFunction(d),f=e.isArray(c);
e.use(f?c.join(","):c,b?function(b){d.apply(b,a.call(arguments,1))}:e.noop)}else d()},libEnv:function(a){var c=a.appHome,b=location,f=b.protocol,d=a.appName;~c.indexOf(f)||(c=this.path(b.href,c));e.endsWith(c,"/")||(c+="/");a.appHome=c;var i=a.debug;i&&(i=0==c.indexOf(f+"//"+b.host));"~"==d.charAt(0)&&e.config({map:[[RegExp("/"+d+"/"),"/"]]});b="";(b=i?e.now():a.appTag)&&(b+=".js");f=a.appCombine;e.isUndefined(f)&&(f=e.config("combine"));e.config({packages:[{name:d,path:c,debug:a.debug=i,combine:f,
tag:b}]})},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isObject,isRegExp:e.isRegExp,isString:e.isString,isNumber:e.isNumber})});
KISSY.add("magix/router",function(e,a,t,u){var g=window,n=a.has,r=a.mix,j=document,l=/^UTF-8$/i.test(j.charset||j.characterSet||"UTF-8"),q=a.config(),p=a.createCache(),k=a.createCache(),o,d,h,v=65536,i=/#.*$/,x=/^[^#]*#?!?/,c=q.nativeHistory,s,w,m=function(b,f,c){if(b){c=this.params;a.isArray(b)||(b=b.split(","));for(var d=0;d<b.length&&!(f=n(c,b[d]));d++);}return f},z=function(){return n(this,"pathname")},b=function(){return n(this,"view")},f=function(){return this.hash.pathname!=this.query.pathname},
y=function(b){return this.hash.params[b]!=this.query.params[b]},B=function(b){return n(this.hash.params,b)},C=function(b){return n(this.query.params,b)},D=function(b){return this.params[b]},e=r({getView:function(b){if(!h){h={routes:q.routes||{},e404:q.notFoundView};var f=q.defaultView;if(!f)throw Error("unset defaultView");h.home=f;var c=q.defaultPathname||"";h.routes[c]=f;h.pathname=c}b||(b=h.pathname);f=h.routes;f=a.isFunction(f)?f.call(q,b):f[b];return{view:f?f:h.e404||h.home,pathname:f?b:h.e404?
b:h.pathname}},start:function(){var b=g.history;s=c&&b.pushState;w=c&&!s;s?this.useState():this.useHash();this.route()},parsePath:function(b){var b=a.pathToObject(b,l),f=b.pathname;f&&"/"!=f.charAt(0)&&w&&(b.pathname=a.path(g.location.pathname,f));return b},parseQH:function(b){var b=b||g.location.href,a=p.get(b);if(!a){var a=b.replace(i,""),c=b.replace(x,""),d=this.parsePath(a),e=this.parsePath(c),h={};r(h,d.params);r(h,e.params);a={pathnameDiff:f,paramDiff:y,hashOwn:B,queryOwn:C,get:D,href:b,srcQuery:a,
srcHash:c,query:d,hash:e,params:h};p.set(b,a)}return a},parseLoc:function(b){b=this.parseQH(b);if(!b.view){var a=this.getView(c?b.hash.pathname||b.query.pathname:b.hash.pathname);r(b,a)}return b},getChged:function(a,f){var c=f.href,d=a.href+"\n"+c,i=k.get(d);i||(d=c+"\n"+d,i=k.get(d));if(!i){var e,i={params:{}};if(a.pathname!=f.pathname)e=i.pathname=1;if(a.view!=f.view)e=i.view=1;var c=a.params,h=f.params,g;for(g in c)c[g]!=h[g]&&(e=1,i.params[g]=1);for(g in h)c[g]!=h[g]&&(e=1,i.params[g]=1);i.occur=
e;i.isParam=m;i.isPathname=z;i.isView=b;k.set(d,i)}return i},route:function(){var b=this.parseLoc(),a=d||{params:{},href:"~"},f=!d;d=b;a=this.getChged(a,b);a.occur&&(o=b,this.fire("changed",{location:b,changed:a,force:f}))},navigate2:function(b){if(b&&a.isString(b)){var f=this.parsePath(b),b={};b.params=r({},f.params);b.pathname=f.pathname;if(b.pathname){if(w&&(f=o.query)&&(f=f.params))for(var c in f)n(f,c)&&!n(b.params,c)&&(b.params[c]="")}else c=r({},o.params),b.params=r(c,b.params),b.pathname=
o.pathname;c=a.objectToPath(b);if(s?c!=o.srcQuery:c!=o.srcHash)s?(this.popFired=1,history.pushState(v--,j.title,c),this.route()):(r(b,o,b),b.srcHash=c,b.hash={params:b.params,pathname:b.pathname},this.fire("changed",{loc:o=b}),location.hash="#!"+c)}},navigate:function(b,f){!f&&a.isObject(b)&&(f=b,b="");f&&(b=a.objectToPath({params:f,pathname:b},l));this.navigate2(b)}},t);e.useState=function(){var b=this,a=location.href;u.on(g,"popstate",function(){var f=location.href==a;if(b.popFired||!f)b.popFired=
1,b.route()})};e.useHash=function(){var b=this;u.on(g,"hashchange",function(){b.route()})};return e},{requires:["magix/magix","magix/event","event"]});
KISSY.add("magix/vframe",function(e,a,t,u){var g=document,n=65536,r=window.CollectGarbage||a.noop,j=a.mix,e=a.config(),l=e.tagName,q=e.rootId,p=a.has,k,o,d=function(a){return"object"==typeof a?a:g.getElementById(a)};g.createElement(l);var h=/<script[^>]*>[\s\S]*?<\/script>/ig,v=function(a){this.id=a;this.vId=a+"_v";this.cM={};this.rC=this.cC=0;this.sign=-2147483648;this.rM={}};j(v,{root:function(a){if(!k){var e=d(q);if(!e)e=g.createElement(l),e.id=q,g.body.insertBefore(e,g.body.firstChild);k=new v(q);
a.add(k)}return k}});j(j(v.prototype,t),{useAnimUpdate:a.noop,oldViewDestroy:a.noop,prepareNextView:a.noop,newViewCreated:a.noop,mountView:function(i,e){var c=this,g=d(c.id);g._bak?g._chgd=1:(g._bak=1,g._tmpl=g.innerHTML.replace(h,""));var l=c.viewUsable&&c.useAnimUpdate();c.unmountView(l,1);if(i){var m=a.pathToObject(i),n=m.pathname,b=--c.sign;a.libRequire(n,function(a){if(b==c.sign){var i=c.owner;u.prepare(a,{$:d,path:n,vom:i});var h;l?(h=c.vId,c.prepareNextView()):h=c.id;var k=new a({owner:c,id:h,
vId:c.vId,vfId:c.id,location:i.getLoc()});c.view=k;k.on("interact",function(b){c.fire("viewInteract",{view:k});c.viewUsable=1;l&&c.newViewCreated(1);if(!b.tmpl){if(!l&&g._chgd)g.innerHTML=g._tmpl;c.mountZoneVframes(0,0,1)}k.on("rendered",function(){c.mountZoneVframes(0,0,1)});k.on("prerender",function(b){c.unmountZoneVframes(0,b.anim)})},0);e=e||{};k.load(j(e,m.params,e))}})}},unmountView:function(a,e){if(this.view){o||(o={caused:this.id});this.unmountZoneVframes(0,a);this.childrenAlter(o);this.view.destroy();
var c=d(this.id);if(!a&&c._bak)c.innerHTML=c._tmpl;a&&e&&this.oldViewDestroy();delete this.view;delete this.viewUsable;o=0;this.fire("viewUnmounted");r()}this.un("viewInteract");this.sign--},mountVframe:function(a,d,c,e){var g=this.owner,h=g.get(a);if(!h)h=new v(a),h.pId=this.id,p(this.cM,a)||this.cC++,this.cM[a]=e,g.add(h);h.mountView(d,c);return h},mountZoneVframes:function(a,e,c){this.unmountZoneVframes(a);var a=a?a:d(this.vId)||d(this.id),a=d(a).getElementsByTagName(l),g=a.length,h={};if(g)for(var m=
0,j,b,f,y;m<g;m++){j=a[m];b=j.id||(j.id="magix_vf_"+n--);p(h,b)||(f=j.getAttribute("mx-view"),y=j.getAttribute("mx-defer"),(!y||f)&&this.mountVframe(b,f,e,c));j=d(j).getElementsByTagName(l);b=0;for(f=j.length;b<f;b++)h[j[b].id||(j[b].id="magix_vf_"+n--)]=1}this.cC==this.rC&&this.childrenCreated({})},unmountVframe:function(a,d){var a=a||this.id,c=this.owner,e=c.get(a);if(e){var g=e.fcc;e.unmountView(d);c.remove(a,g);if((c=c.get(e.pId))&&p(c.cM,a))delete c.cM[a],c.cC--}},unmountZoneVframes:function(a,
e){var c;if(a){c=d(a).getElementsByTagName(l);for(var g={},h=this.cM,j=c.length-1,k;0<=j;j--)k=c[j].id,p(h,k)&&(g[k]=1);c=g}else c=this.cM;for(var b in c)this.unmountVframe(b,e)},childrenCreated:function(a){var d=this.view;if(d&&!this.fcc)this.fcc=1,delete this.fca,d.fire("created",a),this.fire("created",a);var c=this.owner;c.childCreated();d=this.id;if((c=c.get(this.pId))&&!p(c.rM,d))c.rM[d]=c.cM[d],c.rC++,c.rC==c.cC&&c.childrenCreated(a)},childrenAlter:function(a){delete this.fcc;if(!this.fca){var d=
this.view,c=this.id;if(d)this.fca=1,d.fire("alter",a),this.fire("alter",a);if((d=this.owner.get(this.pId))&&p(d.rM,c)){var e=d.rM[c];d.rC--;delete d.rM[c];e&&d.childrenAlter(a)}}},locationChanged:function(d,e){var c=this.view;if(c&&c.sign&&(c.location=d,c.rendered)){var g=c.olChanged(e),h={location:d,changed:e,prevent:function(){this.cs=[]},toChildren:function(b){b=b||[];a.isString(b)&&(b=b.split(","));this.cs=b}};g&&a.safeExec(c.locationChange,h,c);for(var c=h.cs||a.keys(this.cM),g=0,h=c.length,
j=this.owner,k;g<h;g++)(k=j.get(c[g]))&&k.locationChanged(d,e)}},locationUpdated:function(a){var d=this.view;if(d&&d.sign){d.location=a;var d=this.cM,c,e=this.owner,g;for(g in d)(c=e.get(g))&&c.locationUpdated(a)}}});return v},{requires:["magix/magix","magix/event","magix/view"]});
KISSY.add("magix/view",function(e,a,t,u,g){var n=e.Env.mods,r={wrapAsyn:1,extend:1},j=function(b,f,c){for(var d in f)e.isObject(f[d])?(a.has(b,d)||(b[d]={}),j(b[d],f[d],!0)):c&&(b[d]=f[d])},l=a.safeExec,q=a.has,p=[],k=a.config(),o=/^~[^\/]*/,d=a.mix,h=a.listToMap("render,renderUI"),v=function(b){return function(){var a;this.sign&&(this.sign++,this.fire("rendercall"),a=b.apply(this,arguments));return a}},i=function(b){d(this,b);this.sign=1};d(i,{wrapAsyn:function(){if(!this["~~"]){this["~~"]=1;var b=
this.prototype,f,c;for(c in b){f=b[c];var d=null;a.isFunction(f)&&f!=a.noop&&!f["~~"]&&q(h,c)&&(d=v(f),d["~~"]=f,b[c]=d)}}}});var x=i.prototype,c=window.CollectGarbage||a.noop,s=/\smx-[^ohv][a-z]+\s*=/g,w={prevent:function(b){b=b||this.domEvent;b.preventDefault?b.preventDefault():b.returnValue=!1},stop:function(b){b=b||this.domEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},halt:function(b){this.prevent(b);this.stop(b)}},m=/(\w+)(?:<(\w+)>)?(?:{([\s\S]*)})?/,z=/(\w+):([^,]+)/g;d(x,
t);d(x,{render:a.noop,locationChange:a.noop,init:a.noop,hasTmpl:!0,enableEvent:!0,enableAnim:!1,load:function(){var b=this,a=b.hasTmpl,c=arguments,d=b.sign,e=function(){if(d==b.sign&&(b.delegateEvents(),b.fire("interact",{tmpl:a},1),l(b.init,c,b),l(b.render,p,b),!a&&!b.rendered))b.rendered=!0,b.fire("primed",null,1)};a&&!q(b,"template")?b.planTmpl(e):e()},updateViewId:function(){this.id=this.$(this.vId)?this.vId:this.vfId},beginUpdateHTML:function(){if(this.sign&&this.rendered){var b=this.enableAnim;
this.fire("refresh",0,1);this.fire("prerender",{anim:b});var a=this.owner;b&&(l(a.oldViewDestroy,p,a),l(a.prepareNextView,p,a),this.updateViewId())}},endUpdateHTML:function(){if(this.sign){if(this.rendered&&this.enableAnim){var b=this.owner;l(b.newViewCreated,p,b)}this.rendered||this.fire("primed",null,1);this.rendered=!0;this.fire("rendered");c()}},wrapMxEvent:function(b){return b?(""+b).replace(s,' mx-owner="'+this.vfId+'"$&'):b},setViewHTML:function(b){this.beginUpdateHTML();if(this.sign)this.$(this.id).innerHTML=
this.wrapMxEvent(b);this.endUpdateHTML()},observeLocation:function(b){var c;if(!this.$ol)this.$ol={keys:[]};c=this.$ol;var d=c.keys;if(a.isObject(b))c.pn=b.pathname,b=b.keys;if(b)c.keys=d.concat(a.isString(b)?b.split(","):b)},olChanged:function(b){var a=this.$ol;if(a){var c=0;a.pn&&(c=b.isPathname());c||(c=b.isParam(a.keys));return c}return 1},destroy:function(){this.fire("refresh",0,1);this.fire("destroy",0,1,1);this.delegateEvents(1);this.sign=0},parentView:function(){var b=this.vom.get(this.owner.pId),
a=null;if(b&&b.viewUsable)a=b.view;return a},planTmpl:function(b){var c=this,d=a.tmpl(c.path);d.h?(c.template=d.v,b()):(d=c.home+c.path.replace(o,"")+".html",c.fetchTmpl(d,function(d){c.template=a.tmpl(c.path,d);b()},k.debug))},processEvent:function(a){if(this.enableEvent&&this.sign){var c=a.se,e=a.info.match(m),g=e[1],h=e[2],e=e[3],j=this.events;if(j){var i=j[c.type];if(w[h])w[h](c);if(i&&i[g]){var k={};e&&e.replace(z,function(a,b,c){k[b]=c});l(i[g],d({view:this,currentId:a.cId,targetId:a.tId,domEvent:c,
events:j,params:k},w),i)}}}},delegateEvents:function(a){var c=this.events,a=a?u.detachEvent:u.attachEvent,d;for(d in c)a.call(u,d)}});i.prototype.fetchTmpl=function(b,c,d){var h=j[b];h?h.push(c):(h=j[b]=[c],g({url:b+(d?"?_="+e.now():""),success:function(c){a.safeExec(h,c);delete j[b]},error:function(c,d){a.safeExec(h,d);delete j[b]}}))};i.extend=function(b,c){var d=function(){d.superclass.constructor.apply(this,arguments);c&&a.safeExec(c,arguments,this)};d.extend=this.extend;return e.extend(d,this,
b)};i.prepare=function(b,c){if(!b.wrapAsyn){for(var d in this)a.has(r,d)&&(b[d]=this[d]);d=b.prototype;for(var e=b;e.superclass;)e=e.superclass.constructor,j(d,e.prototype);c.home=n[c.path].packageInfo.getBase();a.mix(d,c)}b.wrapAsyn()};return i},{requires:["magix/magix","magix/event","magix/body","ajax"]});
KISSY.add("magix/vom",function(e,a,t,u,g){var n=t.has,r=0,j=0,l=0,q=0,p={},k,o=t.mix({all:function(){return p},add:function(a){if(!n(p,a.id))r++,p[a.id]=a,a.owner=o,o.fire("add",{vframe:a})},get:function(a){return p[a]},remove:function(a,e){var g=p[a];g&&(r--,e&&j--,delete p[a],o.fire("remove",{vframe:g}))},childCreated:function(){if(!q){j++;var a=j/r;l<a&&(o.fire("progress",{percent:l=a}),1==a&&(q=1,o.un("progress")))}},root:function(){return a.root(o)},mountRoot:function(a){var e=o.root();k=a.location;
e.mountView(k.view)},locChanged:function(a){k=a.location;o.root().locationChanged(k,a.changed)},locUpdated:function(a){k=a;o.root().locationUpdated(a)},getLoc:function(){return k}},u);g.VOM=o;g.on("event",function(a){var e=o.get(a.hld);(e=e&&e.view)&&e.processEvent(a)});return o},{requires:["magix/vframe","magix/magix","magix/event","magix/body"]});
(function(e){var a=function(){};if(!e.console)e.console={log:a,info:a,error:a};var t,u={};if(!e.Magix)e.Magix={config:function(a){for(var e in a)u[e]=a[e]},start:function(a){t=a}},KISSY.use("magix/magix",function(a,n){e.Magix=n;n.config(u);t&&n.start(t)})})(this);